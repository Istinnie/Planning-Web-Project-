<?php
//27.0.2.0 TYPE/Modele.php GF
//VersionVI: 01F270103n
//(c) 2005-2012 PC SOFT - Release
 if (!defined('__INC__TYPE/Usine.php')) { define('__INC__TYPE/Usine.php',true); include_once(WB_INCLUDE_PATH.'WDa33fd4b06ba3e49d876e9996bca0c7e0.php'); } if (!defined('__INC__FMK/Chaine.php')) { define('__INC__FMK/Chaine.php',true); include_once(WB_INCLUDE_PATH.'WD55acb2e708e26f23cb8956cd93e98123.php'); } if (!defined('__INC__IHM/CompoObjConst.php')) { define('__INC__IHM/CompoObjConst.php',true); include_once(WB_INCLUDE_PATH.'WD491e0f4a2e48dd39cd8c7caa2a6eddf4.php'); } if (!defined('__INC__IHM/Champ/Calendrier/DateTime.php')) { define('__INC__IHM/Champ/Calendrier/DateTime.php',true); include_once(WB_INCLUDE_PATH.'WD8a3f9ea956942dad24d3a1c8d98a8330.php'); } if (!defined('__INC__FMK/Compat/winbase.php')) { define('__INC__FMK/Compat/winbase.php',true); include_once(WB_INCLUDE_PATH.'WD09f2bc3afcb1ee8c84caff6287ba9e87.php'); } if (!defined('__INC__TYPE/Serialisation.php')) { define('__INC__TYPE/Serialisation.php',true); include_once(WB_INCLUDE_PATH.'WD77a2580b4fb8d10177b22b15a4b1e654.php'); } define('VALEUR_EPSILON', 0.000001); class CTypeSansPropriete extends CTypeBase { function& getProp($sNomPropriete) { Erreur('ErreurGenerique',FMK_ChaineConstruit(Fc34ec142("PROPRIETE_INDISPONIBLE"),$sNomPropriete,$this->F3b9ec4ca())); } } class CTypeAvecPropriete extends CTypeSansPropriete { var $m_Valeur; var $m_sTypeOperateurEnCours = null; function __construct($Valeur = null) { parent::__construct(); if (!isset($Valeur)) $this->SetValeur($this->F9d1a8478()); else $this->SetValeur($Valeur); } function F1b8e122c($Valeur) { if (is_object($Valeur)) return $this->F1b8e122c($Valeur->GetValeur()); return $Valeur; } function& Fc424b461() { $sRetour = VersChaine($this->GetValeur()); return $sRetour; } function F39f2478a() { $this->SetValeur($this->F9d1a8478()); return true; } function F9d1a8478() { return null; } function ProprieteExiste($sNomProp) { $sNomProp = Fcb2d4de8($sNomProp,ccSansAccent); if ($this->Fe0afa3f4($sNomProp)!='') { return true; } $tab = array( array('Alias', 'Alias') ,array('BorneMax', 'MaxValue') ,array('BorneMin', 'MinValue') ,array('Bulle', 'ToolTip') ,array('CadrageHorizontal', 'HorizontalAlignment') ,array('CadrageVertical', 'VerticalAlignment') ,array('ClasseHTML', 'HTMLClass') ,array('CodeCSS', 'CodeCSS') ,array('CodeHTML', 'CodeHTML') ,array('CodeJS', 'CodeJS') ,array('Contenu', 'Content') ,array('ContenuInitial', 'InitialContent') ,array('Couleur', 'Color') ,array('CouleurFond', 'BrushColor') ,array('Description', 'Description') ,array('DndCible', 'DndTarget') ,array('DndSource', 'DndSource') ,array('DéplacementRDV', 'MovementAPT') ,array('Enroulé', 'Collapsed') ,array('Etat', 'State') ,array('FormatMémorisé', 'MemoryFormat') ,array('GranularitéDurée', 'GranularityDuration') ,array('GranularitéDéplacement', 'GranularityMovement') ,array('GranularitéRendezVous', 'GranularityAppointment') ,array('HTMLAprès', 'HTMLAfter') ,array('HTMLAvant', 'HTMLBefore') ,array('HTMLEntête', 'HTMLHeader') ,array('HTMLFinPage', 'HTMLEndPage') ,array('Hauteur', 'Height') ,array('HeureOuvrableDébut', 'WorkingHourStart') ,array('HeureOuvrableFin', 'WorkingHourEnd') ,array('Image', 'Image') ,array('ImageDéroulée', 'ExpandedImage') ,array('ImageEnroulée', 'CollapsedImage') ,array('ImageEtat', 'ImageState') ,array('Indication', 'Hint') ,array('Largeur', 'Width') ,array('Libellé', 'Caption') ,array('LibelléHTML', 'CaptionHTML') ,array('MasqueTitreDate', 'MaskTitleDate') ,array('ModeCarte', 'MapMode') ,array('ModeTransparence', 'TransparencyMode') ,array('ModificationDuréeRDV', 'ModificationDurationAPT') ,array('MotsClés', 'Keywords') ,array('Multisélection', 'Multiselection') ,array('NbLignesParPage', 'NbLinesPerPage') ,array('Nom', 'Name') ,array('Note', 'Note') ,array('Nouveau', 'NewLine') ,array('Num1erJourDeLaSemaine', 'Num1stDayOfTheWeek') ,array('Occurrence', 'Occurrence') ,array('Opacité', 'Opacity') ,array('OptionTri', 'SortOption') ,array('Plan', 'Plane') ,array('PoliceGras', 'FontBold') ,array('PoliceItalique', 'FontItalic') ,array('PoliceNom', 'FontName') ,array('PoliceSoulignée', 'FontUnderlined') ,array('PoliceTaille', 'FontSize') ,array('Ressource', 'Resource') ,array('RubriqueParcourue', 'BrowsedItem') ,array('SaisieDirecteRDV', 'DirectInputAPT') ,array('SélectionPériode', 'PeriodSelection') ,array('Sélectionnée', 'Selected') ,array('Taille', 'Size') ,array('TexteAlternatif', 'AlternativeText') ,array('Titre', 'Title') ,array('TitreNote', 'NoteTitle') ,array('Type', 'Type') ,array('TypeFichiers', 'TypeFiles') ,array('URL', 'URL') ,array('Valeur', 'Value') ,array('ValeurAffichée', 'DisplayedValue') ,array('ValeurInférieure', 'LowerValue') ,array('ValeurInitiale', 'InitialValue') ,array('ValeurMémorisée', 'StoredValue') ,array('ValeurRenvoyée', 'ReturnedValue') ,array('ValeurSupérieure', 'UpperValue') ,array('Vertical', 'Vertical') ,array('Vide', 'Empty') ,array('Vignette', 'Thumbnail') ,array('Visible', 'Visible') ,array('X', 'X') ,array('Y', 'Y') ,array('Zoom', 'Zoom') ,array('BoutonCalendrier','CalendarButton') ,array('EtatInitial','InitialState') ,array('VisibleInitial','InitialVisible') ,array('XInitial','XInitial') ,array('YInitial','YInitial') ,array('NombreColonne','NumberColumn') ,array('BulleTitre','ToolTipTitle') ,array('BandeauVisible','BarVisible') ,array('TexteSansFormat','TextWithoutFormat') ); foreach ($tab as $tabFRUS) { if ( (Fda9fdf77($tabFRUS[0],$sNomProp,ccSansAccent+ccSansCasse)==0) || (Fda9fdf77($tabFRUS[1],$sNomProp,ccSansAccent+ccSansCasse)==0) ) { return $this->Fe0afa3f4(Fcb2d4de8($tabFRUS[0],ccSansAccent))!=''; } } return false; } function Fe0afa3f4($prop,$nType = GETTER_PROPRIETE) { $sFonc = F2080fcae($prop,$nType); return is_callable(array($this,$sFonc)) ? $sFonc : ''; } function& getProp($prop) { $sFonc = $this->Fe0afa3f4($prop); if (!empty($sFonc)) { return $this->{$sFonc}(); } return parent::getProp($this->F8d3db64f($prop)); } function F9656d042($prop,$valeur) { $sFonc = F2080fcae($prop,SETTER_PROPRIETE); if (is_callable(array($this,$sFonc))) { $this->{$sFonc}(VersPrimitif($valeur)); return true; } return false; } function F8d3db64f($prop) { return F8d3db64f($prop); } function& GetValeur() { return $this->m_Valeur; } function SetValeur($val) { $this->m_Valeur = $this->F1b8e122c($val); } function WB_InstructionLiberer() { $this->m_Valeur = null; } } class CTypeNonComparable extends CTypeAvecPropriete { function& operateur($sTypeOperateur, $PartieDroite = null, $Valeur = null) { Erreur('ErreurGenerique',FMK_ChaineConstruit(Fc34ec142("OPERATEUR_INDISPONIBLE"),F9dbbbee0($sTypeOperateur),$this->F3b9ec4ca())); } } class CTypeComparable extends CTypeNonComparable { function& Fcc4f5b5d($comparaison) { $this->SetValeur(VersPrimitif($comparaison)); return $this->GetValeur(); } function& Fe5a319a6( $Valeur, $nDebut , $nFin = null ) { $nDebutValeur = GetValeur($nDebut); if (!isset($nFin)) $this->SetValeur( $this->Fd2078f0c($nDebutValeur-1) . $Valeur->Fc424b461() ); else $this->SetValeur( $this->Fd2078f0c($nDebutValeur-1) . $Valeur->Fc424b461() . $this->Fbe774e59(GetValeur($nFin)+1) ); return $this->Fc424b461(); } function& Fad725dfd( $Valeur, $nLimite ) { return $this->Fe5a319a6( $Valeur, 1, $nLimite); } function& Fb32eed9e( $Valeur, $nLimite ) { return $this->Fe5a319a6( $Valeur, $nLimite); } function& F314e0408( $Valeur, $nIndice ) { return $this->Fe5a319a6($Valeur, $nIndice, $nIndice); } function& Fc91f0eb7( $Valeur, $nIndice ) { if ( is_callable(array($this, 'SetValI')) ) { $this->SetValI(VersPrimitif($nIndice),VersPrimitif($Valeur)); } elseif ( $this->__GetType() == TYPEWL_STRUCTURE || $this->__GetType() == TYPEWL_DINO ) { return $this->operateur(45143,$nIndice,$Valeur); } elseif (defined('HF') && (F929705c7($this)||($bRequete=Feee3b2d5($this)))) { if ($bRequete) { $this->bInit = false; } return Operateur(95, GetRubrique($this,$nIndice) , $Valeur ); } else parent::operateur( 8253 , $Valeur,$nIndice); return $this->operateurSub($nIndice); } function& Fa2a5d851( $Valeur, $nIndice1, $nIndice2 ) { if ( is_callable(array($this, 'SetValII')) ) { $sIndice1 = VersPrimitif($nIndice1); $sIndice2 = VersPrimitif($nIndice2); if (!is_numeric($sIndice1)) $this->SetValII($sIndice2,$sIndice1,VersPrimitif($Valeur)); else $this->SetValII($sIndice1,$sIndice2,VersPrimitif($Valeur)); } elseif ( $this->__GetType() == TYPEWL_STRUCTURE || $this->__GetType() == TYPEWL_DINO ) { Operateur(8253,$this->operateur(45142,$nIndice1),$nIndice2,$Valeur); } else parent::operateur( 8255 , $Valeur,$nIndice1,$nIndice2); return $this->Fc986b390($nIndice1,$nIndice2); } function& F6613fc00( $Valeur,$nLimite ) { return $this->Fd607686d($Valeur,$nLimite, $nLimite); } function& Fc9fb424c( $Valeur,$nLimite ) { return $this->Fd607686d($Valeur,1, $nLimite); } function& Fc8bca271($Valeur, $nLimite ) { return $this->Fd607686d($Valeur,$nLimite); } function& Fd607686d( $Valeur,$Debut , $Fin = null ) { $RetourDefaut = 0; return $RetourDefaut; } function& F2ecf50bd( $Valeur,$Debut , $Fin ) { $RetourDefaut = 0; return $RetourDefaut; } function& Fa05668f4($param = null, $bPre=false) { $return = VersPrimitif($this); if (!isset($param)) $param = new CEntier(1); Operateur(95,$this,$this->F791b7c6d($param)); $return = $bPre ? VersPrimitif($this) : $return; return $return; } function& F5e73eabc($param = null, $bPre=false) { $return = VersPrimitif($this); if (!isset($param)) $param = new CEntier(1); Operateur(95,$this,$this->F66d4f961($param) ); $return = $bPre ? VersPrimitif($this) : $return; return $return; } function& F482953a9($param) { Operateur(95,$this,Operateur(14608,$this,$param)); return VersPrimitif($this); } function& Ff7107444($param) { Operateur(95,$this,Operateur(14354,$this,$param)); return VersPrimitif($this); } function& F791b7c6d($param=null) { $Resultat = F791b7c6d(VersPrimitif($this),(isset($param) ? VersPrimitif($param) : null)); return $Resultat; } function& F66d4f961($param=null) { $Resultat = F66d4f961(VersPrimitif($this),(isset($param) ? VersPrimitif($param) : null)); return $Resultat; } function& F856992a1($param) { $Resultat = F856992a1(VersPrimitif($this), VersPrimitif($param)); if (!isset($Resultat)) { return Erreur("ErreurGenerique",FMK_ChaineConstruit(Fc34ec142("OPERATEUR_INDISPONIBLE"),F9dbbbee0(14608),$this->F3b9ec4ca())); } return $Resultat; } function& Faac9bb4c($param) { $Resultat = Faac9bb4c(VersPrimitif($this), VersPrimitif($param)); if (!isset($Resultat)) { return Erreur("ErreurGenerique",FMK_ChaineConstruit(Fc34ec142("OPERATEUR_INDISPONIBLE"),F9dbbbee0(14354),$this->F3b9ec4ca())); } return $Resultat; } function& Fc8bab616($param) { $Resultat = Fc8bab616(VersPrimitif($this), VersPrimitif($param)); if (!isset($Resultat)) { return Erreur("ErreurGenerique",FMK_ChaineConstruit(Fc34ec142("OPERATEUR_INDISPONIBLE"),F9dbbbee0(14356),$this->F3b9ec4ca())); } return $Resultat; } function& Fa4014e81( $compare ) { $nRetour = Fa4014e81(VersPrimitif($this),VersPrimitif($compare)); return $nRetour; } function& F8e8c5b63( $compare ) { $nRetour = F8e8c5b63(VersPrimitif($this),VersPrimitif($compare)); return $nRetour; } function& F8a5c4a8f( $compare ) { $nRetour = F8a5c4a8f(VersPrimitif($this),VersPrimitif($compare)); return $nRetour; } function& F6bbd4334() { $bRetour = (is_null(VersPrimitif($this))); return $bRetour; } function& Fd2078f0c( $nLimite ) { return $this->F23692b30(1, $nLimite); } function& Fbe774e59( $nLimite ) { return $this->F23692b30($nLimite); } function& F23692b30( $Debut , $Fin = null ) { $nRetour = F23692b30(VersPrimitif($this),VersPrimitif($Debut),(isset($Fin) ? VersPrimitif($Fin) : null)); return $nRetour; } function& Fe4bf894d( $nIndice ) { return $this->F23692b30($nIndice, $nIndice); } function& operateurSub( $nIndice1 ) { if ( is_callable(array($this, 'GetValI')) ) { return $this->GetValI(VersPrimitif($nIndice1)); } if (defined('HF') && ((F929705c7($this)||Feee3b2d5($this))) ) { return GetRubrique($this,$nIndice1); } if ( $this->__GetType() == TYPEWL_STRUCTURE || $this->__GetType() == TYPEWL_DINO ) { return $this->operateur(45142,$nIndice1); } $sFonc = $this->Fe0afa3f4(VersPrimitif($nIndice1)); if (!empty($sFonc)) { return $this->{$sFonc}(); } return parent::operateur(8252, $nIndice1); } function& Fc986b390( $nIndice1 , $nIndice2 ) { if ( is_callable(array($this, 'GetValII')) ) { $sIndice1 = VersPrimitif($nIndice1); $sIndice2 = VersPrimitif($nIndice2); if (is_string($sIndice1)) return $this->GetValII($sIndice2,$sIndice1); return $this->GetValII($sIndice1,$sIndice2); } if ( $this->__GetType() == TYPEWL_STRUCTURE || $this->__GetType() == TYPEWL_DINO ) { return Operateur(8252,$this->operateur(45142,$nIndice1),$nIndice2); } return parent::operateur(8254, $nIndice1,$nIndice2); } function& F4df46aea( $SousElement = null ) { Fe81a7f9e('OPERATEUR_INDISPONIBLE',F9dbbbee0(8281),F3b9ec4ca($this)); } function& Fdd5e85f8( ) { Fe81a7f9e('OPERATEUR_INDISPONIBLE',F9dbbbee0(8283),F3b9ec4ca($this)); } function& F73c8c735( ) { $Resultat = (! (VersBooleen($this)) ); return $Resultat; } function& Fc4e4d30e( $Operande ) { $Resultat = ((F075ca95b($Operande)) & (F075ca95b($this)) ); return $Resultat; } function& F6d1ea138( $Operande ) { $Resultat = ((F075ca95b($Operande)) | (F075ca95b($this)) ); return $Resultat; } function& F8145229a( $Operande ) { $Resultat = ((F075ca95b($Operande)) ^ (F075ca95b($this)) ); return $Resultat; } function& F6ad9f563( ) { $Resultat = (~ (VersPrimitif($this)) ); return $Resultat; } function& F2191518a( $Operande ) { $Resultat = pow((F075ca95b($this)) , (F075ca95b($Operande)) ); return $Resultat; } function& Fe680d22d( $Operande ) { $Resultat = ( (F075ca95b($this)) << (F075ca95b($Operande)) ); return $Resultat; } function& F2a7f51d3( $Operande ) { $Resultat = ( (F075ca95b($this)) >> (F075ca95b($Operande)) ); return $Resultat; } function& F83651b3d( $Operande ) { $Resultat = ((VersBooleen($Operande)) && (VersBooleen($this)) ); return $Resultat; } function& Fbc1ef051( $Operande ) { $Resultat = ((VersBooleen($Operande)) || (VersBooleen($this)) ); return $Resultat; } function& Fad20b733( $nLimite ) { return $this->F23467323($nLimite, $nLimite); } function& F7a650d13( $nLimite ) { return $this->F23467323(1, $nLimite); } function& F40e48e41( $nLimite ) { return $this->F23467323($nLimite); } function& F23467323( $Debut , $Fin = null ) { $RetourDefaut = 0; return $RetourDefaut; } function& F0213adee( $Debut , $Fin ) { $RetourDefaut = 0; return $RetourDefaut; } function& F6c5cf331($clNom,$clParam = null) { Fe81a7f9e('OPERATEUR_INDISPONIBLE',F9dbbbee0(45142),F3b9ec4ca($this)); } function& Ff327a0d0($clValeur,$clNom) { Fe81a7f9e('OPERATEUR_INDISPONIBLE',F9dbbbee0(45143),F3b9ec4ca($this)); } function& operateur($sTypeOperateur, $PartieDroite = null, $Valeur = null) { $this->m_sTypeOperateurEnCours = $sTypeOperateur; if ($sTypeOperateur & 1) { switch ($sTypeOperateur & 61440) { case 32768:return $this->Fbaabfe5e($sTypeOperateur); case 28672:return $this->Fe53c0654($sTypeOperateur,$PartieDroite); default: return $this->F676049cc($sTypeOperateur,$PartieDroite,$Valeur); } } switch($sTypeOperateur & 61440) { case 4096: return $this->F6a6bf0ab($sTypeOperateur,$PartieDroite,$Valeur); case 8192: return $this->F4bff8efe($sTypeOperateur,$PartieDroite,$Valeur); case 12288: return $this->F6b6137ce($sTypeOperateur,$PartieDroite); case 16384: return $this->F201e10b3($sTypeOperateur,$PartieDroite,$Valeur); case 20480: return $this->F16fb74b7($sTypeOperateur,$PartieDroite); case 24576: return $this->F8d98a2d9($sTypeOperateur,$PartieDroite); case 36864: return $this->F53e36ee9($sTypeOperateur,$PartieDroite); case 40960: return $this->F82798532($sTypeOperateur,$PartieDroite); case 45056: return $this->F7549365c($sTypeOperateur,$PartieDroite,$Valeur); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateur inconnu ') . F9dbbbee0($sTypeOperateur) ); } return null; } function& F6a6bf0ab($sTypeOperateur, $PartieDroite = null, $Valeur = null) { switch ($sTypeOperateur) { case 6166: return $this->F791b7c6d($PartieDroite); case 6168: return $this->F66d4f961($PartieDroite); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeCourant')); } return null; } function& Fbaabfe5e($sTypeOperateur) { switch ($sTypeOperateur) { case 32865: return $this->Fa05668f4(); case 32867: return $this->F5e73eabc(); case 32869: return $this->Fa05668f4(null,true); case 32871: return $this->F5e73eabc(null,true); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupe0Param')); } return null; } function& Fe53c0654($sTypeOperateur, $PartieDroite = null) { switch ($sTypeOperateur) { case 28777: return $this->Fa05668f4($PartieDroite); case 28779: return $this->F5e73eabc($PartieDroite); case 28781: return $this->F482953a9($PartieDroite); case 28783: return $this->Ff7107444($PartieDroite); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupe1Param')); } return null; } function& F6b6137ce($sTypeOperateur, $PartieDroite = null) { switch ($sTypeOperateur) { case 14608: return $this->F856992a1($PartieDroite); case 14354: return $this->Faac9bb4c($PartieDroite); case 14356: return $this->Fc8bab616($PartieDroite); case 14404: return $this->F2191518a($PartieDroite); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeMat')); } return null; } function& F4bff8efe($sTypeOperateur, $PartieDroite = null) { switch ($sTypeOperateur) { case 8252: return $this->operateurSub($PartieDroite); case 8254: return $this->Fc986b390($PartieDroite->operateurSub(1),$PartieDroite->operateurSub(2)); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeSub')); } return null; } function& F53e36ee9($sTypeOperateur, $PartieDroite = null) { switch ($sTypeOperateur) { case 38960: return $this->F73c8c735(); case 39224: return $this->F83651b3d($PartieDroite); case 39226: return $this->Fbc1ef051($PartieDroite); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeBool')); } return null; } function& F16fb74b7($sTypeOperateur, $PartieDroite = null) { switch ($sTypeOperateur) { case 22834: return $this->Fc4e4d30e($PartieDroite); case 22836: return $this->F6d1ea138($PartieDroite); case 22838: case 22848: return $this->F8145229a($PartieDroite); case 22594: return $this->F6ad9f563(); case 22598: return $this->Fe680d22d($PartieDroite); case 22600: return $this->F2a7f51d3($PartieDroite); case 20554: return $this->Fad20b733($PartieDroite); case 20556: return $this->F7a650d13($PartieDroite); case 20558: return $this->F40e48e41($PartieDroite); case 20560: return $this->F23467323($PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2)); case 20562: return $this->F23467323($PartieDroite->operateurSub(1), Operateur(6168,Operateur(6166,$PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2) ),1)); case 20564: return $this->F0213adee($PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2)); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeBinaire')); } return null; } function& F8d98a2d9($sTypeOperateur, $PartieDroite = null, $Valeur = null) { $Comparaison = $this->Fa4014e81($PartieDroite); if ($Comparaison===false) return $Comparaison; switch ($sTypeOperateur) { case 26716: return $Comparaison; case 24866: $bRetour = ($Comparaison === 0); break; case 24868: $bRetour = ($Comparaison !== 0); break; case 2646566: $bRetour = ($Comparaison > 0); break; case 2515496: $bRetour = ($Comparaison < 0); break; case 2908714: $bRetour = ($Comparaison >= 0); break; case 2777644: $bRetour = ($Comparaison <= 0); break; default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeComparaison')); } return $bRetour; } function& F676049cc($sTypeOperateur, $PartieDroite = null, $Valeur = null) { switch ($sTypeOperateur) { case 95: return $this->Fcc4f5b5d($PartieDroite); case 8253: return $this->Fc91f0eb7($Valeur, $PartieDroite); case 8255: return $this->Fa2a5d851($Valeur, $PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2)); case 8281: return $this->F4df46aea($PartieDroite); case 8283: return $this->Fdd5e85f8(); case 45143: return $this->Ff327a0d0($Valeur,$PartieDroite); break; case 18443: return $this->Fad725dfd($Valeur, $PartieDroite); case 18441: return $this->Fb32eed9e($Valeur, $PartieDroite); case 16397: return $this->Fe5a319a6($Valeur, $PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2)); case 16387: return $this->Fe5a319a6($Valeur,$PartieDroite->operateurSub(1), Operateur(6166,$PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2) )-1); case 18433: return $this->F314e0408($Valeur, $PartieDroite); case 20555: return $this->F6613fc00($Valeur,$PartieDroite); case 20557: return $this->Fc9fb424c($Valeur,$PartieDroite); case 20559: return $this->Fc8bca271($Valeur,$PartieDroite); case 20561: return $this->Fd607686d($Valeur,$PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2)); case 20563: return $this->Fd607686d($Valeur,$PartieDroite->operateurSub(1), Operateur(6168,Operateur(6166,$PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2) ),1)); case 20565: return $this->F2ecf50bd($Valeur,$PartieDroite->operateurSub(1), $PartieDroite->operateurSub(2)); default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeAffectation')); } return null; } function& F201e10b3($sTypeOperateur, $PartieDroite = null, $Valeur = null) { switch ($sTypeOperateur) { case 18440: return $this->Fbe774e59($PartieDroite); case 18442: return $this->Fd2078f0c($PartieDroite); case 16396: $return = F23692b30(VersChaine($this),VersPrimitif($PartieDroite->operateurSub(1)), VersPrimitif($PartieDroite->operateurSub(2))); return $return; case 16386: $p1 = VersPrimitif($PartieDroite->operateurSub(1)); $return = F23692b30(VersChaine($this), $p1, F791b7c6d($p1, VersPrimitif($PartieDroite->operateurSub(2)) )-1); return $return; case 18432: return $this->Fe4bf894d($PartieDroite); case 16414: $sPartieDroite = VersChaine($PartieDroite); $bRetour = (Fa4014e81($sPartieDroite, Fd2078f0c(VersChaine($this),utf8_strlen($sPartieDroite)) )===0); return $bRetour; case 16496: $sPartieDroite = VersChaine($PartieDroite); if ($sPartieDroite==='') $bRetour=true; else $bRetour = F61bc61eb(Fcb2d4de8(VersChaine($this),ccSansAccent+ccMajuscule+ccSansEspace),Fcb2d4de8($sPartieDroite,ccSansAccent+ccMajuscule+ccSansEspace)); return $bRetour; case 16498: $sPartieDroite=VersChaine($PartieDroite); if (false!==($nPos0=strpos($sPartieDroite,chr(0)))) $sPartieDroite = substr($sPartieDroite,0,$nPos0); $sPartieDroite = Fcb2d4de8($sPartieDroite,ccSansAccent+ccMajuscule+ccSansEspace+ccSansPonctuationNiEspace); if ($sPartieDroite==='') { $bRetour=true; } else { $sPartieGauche = VersChaine($this); if (false!==($nPos0=strpos($sPartieGauche,chr(0)))) $sPartieGauche = substr($sPartieGauche,0,$nPos0); $sPartieGauche = Fcb2d4de8($sPartieGauche,ccSansAccent+ccMajuscule+ccSansEspace+ccSansPonctuationNiEspace); $bRetour = F61bc61eb($sPartieGauche,$sPartieDroite); } return $bRetour; case 16398: $tabParams = GetValeur($PartieDroite); return F5b2f2e5c( $this->Fc424b461(), (isset($tabParams[0]) ? VersPrimitif($tabParams[0]) : null), (isset($tabParams[1]) ? VersPrimitif($tabParams[1]) : null) ); case 16500: $sPartieDroite = VersChaine($PartieDroite); if ($sPartieDroite==='') $bRetour=true; else $bRetour = utf8_strpos(VersChaine($this),$sPartieDroite)>-1; return $bRetour; case 16502: $sPartieDroite = VersChaine($PartieDroite); if ($sPartieDroite==='') $bRetour=true; else $bRetour = utf8_strpos(Fcb2d4de8(VersChaine($this),ccSansAccent+ccMajuscule+ccSansEspace),Fcb2d4de8($sPartieDroite,ccSansAccent+ccMajuscule+ccSansEspace))>-1; return $bRetour; case 16504: $sPartieDroite=VersChaine($PartieDroite); if (false!==($nPos0=strpos($sPartieDroite,chr(0)))) $sPartieDroite = substr($sPartieDroite,0,$nPos0); $sPartieDroite = Fcb2d4de8($sPartieDroite,ccSansAccent+ccMajuscule+ccSansEspace+ccSansPonctuationNiEspace); if ($sPartieDroite==='') { $bRetour=true; } else { $sPartieGauche = VersChaine($this); if (false!==($nPos0=strpos($sPartieGauche,chr(0)))) $sPartieGauche = substr($sPartieGauche,0,$nPos0); $sPartieGauche = Fcb2d4de8($sPartieGauche,ccSansAccent+ccMajuscule+ccSansEspace+ccSansPonctuationNiEspace); $bRetour = utf8_strpos($sPartieGauche,$sPartieDroite)>-1; } return $bRetour; case 16506: $sPartieDroite = VersChaine($PartieDroite); if ($sPartieDroite==='') $bRetour=true; else $bRetour = F0728da76(VersChaine($this),$sPartieDroite); return $bRetour; case 16508: $sPartieDroite = VersChaine($PartieDroite); if ($sPartieDroite==='') $bRetour=true; else $bRetour = F0728da76(Fcb2d4de8(VersChaine($this),ccSansAccent+ccMajuscule+ccSansEspace),Fcb2d4de8($sPartieDroite,ccSansAccent+ccMajuscule+ccSansEspace)); return $bRetour; case 16510: $sPartieDroite=VersChaine($PartieDroite); if (false!==($nPos0=strpos($sPartieDroite,chr(0)))) $sPartieDroite = substr($sPartieDroite,0,$nPos0); $sPartieDroite = Fcb2d4de8($sPartieDroite,ccSansAccent+ccMajuscule+ccSansEspace+ccSansPonctuationNiEspace); if ($sPartieDroite==='') { $bRetour=true; } else { $sPartieGauche = VersChaine($this); if (false!==($nPos0=strpos($sPartieGauche,chr(0)))) $sPartieGauche = substr($sPartieGauche,0,$nPos0); $sPartieGauche = Fcb2d4de8($sPartieGauche,ccSansAccent+ccMajuscule+ccSansEspace+ccSansPonctuationNiEspace); $bRetour = F0728da76($sPartieGauche,$sPartieDroite); } return $bRetour; default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, opérateur inconnu, operateurGroupeChaine')); } Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeChaine')); return null; } function& F82798532($sTypeOperateur, $PartieDroite = null, $Valeur = null) { switch ($sTypeOperateur) { case 44036: return $this->F6bbd4334(); case 44038: $Comparaison = $this->F6bbd4334(); $Comparaison = !$Comparaison; return $Comparaison; case 41006: $VThis = VersPrimitif($this); $bRetour = ( (Fa4014e81($VThis,VersPrimitif($PartieDroite->operateurSub(1)))>=0) && (Fa4014e81($VThis,VersPrimitif($PartieDroite->operateurSub(2)))<=0) ); return $bRetour; case 43290: return $this->F8e8c5b63($PartieDroite); case 43292: return $this->F8a5c4a8f($PartieDroite); case 40992: $bRetour = false; $tabPartieDroite = $PartieDroite->m_Valeur; $vThis = VersPrimitif($this); foreach ($tabPartieDroite as $clObjet) { if (Fa4014e81($vThis,VersPrimitif($clObjet))==0) { $bRetour = true; return $bRetour; } } return $bRetour; default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupeCompAvancee')); } return null; } function& F7549365c($sTypeOperateur, $PartieDroite = null, $Valeur = null) { switch ($sTypeOperateur) { case 45142: return $this->F6c5cf331($PartieDroite,$Valeur); break; default: Erreur('ErreurGenerique',Fd7624002('Erreur de génération, operateurGroupePOO')); } return null; } } class CNull extends CTypeNonComparable { function __construct() { parent::__construct( null ); } function& Fa4014e81( $compare ) { $bResultat = (is_null($compare)) ? 0 : 1; return $bResultat; } function& __GetType() { $t = TYPEWL_NULL; return $t; } function& getProp($sNomPropriete) { Erreur('ErreurGenerique',FMK_ChaineConstruit(Fc34ec142("PROPRIETE_INDISPONIBLE"),$sNomPropriete,$this->F3b9ec4ca())); } } class CPropriete extends CTypeBase { var $m_sNomPropriete; var $m_clObjet; function __construct(&$clObjet, $sNom) { $this->m_nIsXXX = 16; $this->m_clObjet =& $clObjet; $this->m_sNomPropriete = $sNom; } function& Fc424b461() { $sRetour = VersChaine($this->GetValeur()); return $sRetour; } function& GetValeur() { if ($this->m_sNomPropriete === PROP_DEFAUT) return $this->m_clObjet->GetValeur(); return $this->m_clObjet->getProp($this->m_sNomPropriete); } function& __GetType() { $t = F541bbf6d($this->GetValeur()); return $t; } function SetValeur($param) { if ($this->m_sNomPropriete === PROP_DEFAUT) $this->m_clObjet->SetValeur($param); else $this->m_clObjet->F9656d042($this->m_sNomPropriete,$param); } function& operateur($sTypeOperateur, $PartieDroite = null, $Valeur = null) { $this->m_sTypeOperateurEnCours = $sTypeOperateur; $this->m_clObjet->m_sTypeOperateurEnCours = $sTypeOperateur; $ValeurEnCours = $this->GetValeur(); $clType = null; CreerType($clType,null,'',$ValeurEnCours); $Retour =& $clType->operateur($sTypeOperateur, $PartieDroite , $Valeur ); if (Fb2f6fc62($sTypeOperateur)) { $this->SetValeur( (is_object($clType) && Fdef56c7f($clType->m_nIsXXX , 256)) ? $clType : $clType->GetValeur() ); } return $Retour; } function& getProp($sNomPropriete="") { $pclProprieteObjet =& $this->GetValeur(); if ($sNomPropriete === PROP_DEFAUT) return $pclProprieteObjet->GetValeur(); return $pclProprieteObjet->getProp($sNomPropriete); } function F9656d042($prop,$valeur) { $pclProprieteObjet =& $this->GetValeur(); if ($prop === PROP_DEFAUT) $pclProprieteObjet->SetValeur($valeur); else $pclProprieteObjet->F9656d042($prop,$valeur); $this->SetValeur($pclProprieteObjet); } } function F686c9523(&$clObjet,$sNom,$sNomPHP=null) { if ($sNom == 'Valeur' ) { switch ($clObjet->F70cea20e() ? $clObjet->GetType() : -1) { case ID_IMAGE: case 26: case 22: $sNom='Image'; break; case 16: $sNom='Url'; break; case 3: case 0: $sNom='Libelle'; break; default: break; } } return (isset($sNomPHP) ? $sNomPHP : $clObjet->F960e3ffe()).'_'.$sNom; } class CProprieteAttributAuto extends CPropriete { var $m_pclZR; var $m_nIndiceLigne; function __construct(&$clObjet, $sNom, &$pclZR, $nIndiceLigne) { parent::__construct($clObjet,$sNom); $this->m_pclZR =& $pclZR; if (isset($this->m_pclZR->Table)) { $this->m_pclZR = $GLOBALS[$this->m_pclZR->Table]; } $this->m_nIndiceLigne = (is_object($nIndiceLigne) && $nIndiceLigne->m_nIsXXX == 8) ? VersPrimitif($nIndiceLigne->m_Indice1) : VersPrimitif($nIndiceLigne); } function F38674c6b() { if ($this->F6f6154b5()) return; $nIndiceAttributAuto = count($this->m_pclZR->TabAttribut,COUNT_NORMAL); if (isset($this->m_pclZR->TabColonnes)) $nIndiceAttributAuto+=count($this->m_pclZR->TabColonnes,COUNT_NORMAL); $sNomAtt = $this->Fac9bcc1f(); $this->m_pclZR->AjouteAttribut($sNomAtt,$sNomAtt,$sNomAtt,$nIndiceAttributAuto); $this->m_pclZR->SetLiaisonAttributChamp($sNomAtt, $this->m_clObjet->Alias, $this->m_sNomPropriete); } function F6f6154b5($nLigne=null) { $nIndiceWL = $this->Faa7968bf(); if ($nIndiceWL==-1) return false; if (!isset($nLigne)) return true; return array_key_exists($nIndiceWL -1,$this->m_pclZR->TabLigne[ $nLigne ]->TabValeur); } function Fac9bcc1f() { return F686c9523($this->m_clObjet,$this->m_sNomPropriete); } function Faa7968bf() { $sNomAtt = $this->Fac9bcc1f(); if (array_key_exists($sNomAtt,$this->m_pclZR->TabAttribut)) return $this->m_pclZR->TabAttribut[$sNomAtt]->F418f91ca(); return -1; } function& GetValeur() { if ($this->F6f6154b5($this->m_nIndiceLigne)) return $this->m_pclZR->F1adc5abe($this->Fac9bcc1f(),$this->m_nIndiceLigne); return parent::GetValeur(); } function SetValeur($param) { $this->F38674c6b(); $this->m_pclZR->F7d306d49($this->Fac9bcc1f(),$this->m_nIndiceLigne,$param); return ($this->GetValeur()==$param); } function& operateur($sTypeOperateur, $PartieDroite = null, $Valeur = null) { if (Fb2f6fc62($sTypeOperateur)) { $this->F38674c6b(); } return parent::operateur($sTypeOperateur,$PartieDroite,$Valeur); } } class CSousType extends CTypeBase { var $m_clObjet; var $m_Indice1; var $m_Indice2 = null; var $m_clCacheValeur = null; function __construct(&$clObjet, $Indice1, $Indice2 = null) { $this->m_nIsXXX = 8; $this->m_clObjet =& $clObjet; CreerType($this->m_Indice1 ,null, '' , $Indice1); if (isset($Indice2)) { CreerType($this->m_Indice2 , null, '' , $Indice2); } } function& F960e3ffe() { return $this->GetNom(); } function& GetNom() { if ((isset($this->m_Indice2)) && (is_string($this->m_Indice2->GetValeur()))) $return = $this->m_clObjet->GetNom() . '.' . $this->m_Indice2->GetValeur(); else $return = $this->m_clObjet->GetNom(); return $return; } function Fd464306b() { return $this->GetNom(); } function F70cea20e() { return $this->m_clObjet->F70cea20e(); } function& __GetType(){ $tmp = $this->GetValeur(); if (is_object($tmp)) $t =$tmp->__GetType(); else $t = F541bbf6d($this->GetValeur()); return $t;} function& Fc424b461() { $sRetour = VersChaine($this->GetValeur()); return $sRetour; } function& GetValeur() { if (!isset($this->m_clCacheValeur)) { if (!isset($this->m_Indice2)) { $this->m_clCacheValeur =& Operateur(8252,$this->m_clObjet,$this->m_Indice1); } else { $this->m_clCacheValeur =& Operateur(8254,$this->m_clObjet,array($this->m_Indice1,$this->m_Indice2)); } } return $this->m_clCacheValeur; } function SetValeur($param) { $null = null; $this->m_clCacheValeur =& $null; unset($null); $clParam=null; if (!is_object($param)) { CreerType($clParam,null,$param,$param); } else { $clParam=& $param; } if (!isset($this->m_Indice2)) { return Operateur(8253,$this->m_clObjet,$this->m_Indice1,$clParam); } else { return Operateur(8255,$this->m_clObjet,array($this->m_Indice1,$this->m_Indice2),$clParam); } } function& operateur($sTypeOperateur, $PartieDroite = null, $Valeur = null) { $this->m_sTypeOperateurEnCours = $sTypeOperateur; if (is_object($this->m_clObjet)) $this->m_clObjet->m_sTypeOperateurEnCours = $sTypeOperateur; $ValeurEnCours =& $this->GetValeur(); $Retour =& Operateur($sTypeOperateur,$ValeurEnCours,$PartieDroite , $Valeur ); if (Fb2f6fc62($sTypeOperateur)) { $this->SetValeur( $ValeurEnCours ); } return $Retour; } function& getProp($sNomPropriete="") { return GetValeur(GetProp($this->GetValeur() , $sNomPropriete )); } function F9656d042($prop,$valeur) { Operateur(95,GetProp(GetValeur($this) , $prop ),$valeur); } function Ffe33562a() { $pclValeur = $this->GetValeur(); if (!is_object($pclValeur)) return false; return $pclValeur->Ffe33562a(); } function F35be7f7f($bPourJSON=false) { $pclValeur = $this->GetValeur(); return $pclValeur->F35be7f7f($bPourJSON); } function F4629642a($str) { $pclValeur = $this->GetValeur(); return $pclValeur->F4629642a($str); } function F5b70a1d3( &$serialiseur) { $pclValeur = $this->GetValeur(); return $pclValeur->F5b70a1d3($serialiseur); } function F76c9fb0a( &$deserialiseur, &$docXML) { $pclValeur = $this->GetValeur(); return $pclValeur->F76c9fb0a($deserialiseur,$docXML); } function F81cf9784( &$serialiseur) { $pclValeur = $this->GetValeur(); return $pclValeur->F81cf9784($serialiseur); } function F1b864c68( &$deserialiseur, &$docJSON) { $pclValeur = $this->GetValeur(); return $pclValeur->F1b864c68($deserialiseur,$docJSON); } } class CExpression extends CTypeBase { var $m_bSourceObjet = true; var $m_ValeurPrimitiveSource; var $m_clObjet; var $m_sGetOperateur = null; var $m_sGetOperateurOptions = null; function __construct(&$clObjet, $m_sGetOperateur, $m_sGetOperateurOptions = null) { $this->m_nIsXXX = 32; if (!is_object($clObjet)) { CreerType($this->m_clObjet,null,$clObjet,$clObjet); $this->m_bSourceObjet = false; $this->m_ValeurPrimitiveSource =& $clObjet; } else { $this->m_clObjet =& $clObjet; } $this->m_sGetOperateur = $m_sGetOperateur; CreerType($this->m_sGetOperateurOptions , null, $m_sGetOperateurOptions , $m_sGetOperateurOptions); } function& __GetType() { $t = F541bbf6d($this->GetValeur()); return $t; } function& GetValeur() { if ( ($this->m_sGetOperateur === 8252) || ($this->m_sGetOperateur === 45142) ) { return $this->m_clObjet->operateur($this->m_sGetOperateur,$this->m_sGetOperateurOptions); } else { $ValeurEnCours =& $this->m_clObjet->GetValeur(); $clType = null; CreerType($clType,null,$ValeurEnCours,$ValeurEnCours); return $clType->operateur($this->m_sGetOperateur,$this->m_sGetOperateurOptions); } } function SetValeur($param) { $ValeurEnCours = $param; $clType = null; CreerType($clType,null,$ValeurEnCours,$ValeurEnCours); $this->m_clObjet->operateur($this->m_sGetOperateur | 1 , $this->m_sGetOperateurOptions , $clType); if (!$this->m_bSourceObjet) { $this->m_ValeurPrimitiveSource = $this->m_clObjet->GetValeur(); } } function& Fc424b461() { $sRetour = VersChaine($this->GetValeur()); return $sRetour; } function& operateur($sTypeOperateur, $PartieDroite = null, $Valeur = null) { $ValeurEnCours =& $this->GetValeur(); $clType = null; CreerType($clType,null,$ValeurEnCours,$ValeurEnCours); $Retour =& $clType->operateur($sTypeOperateur, $PartieDroite , $Valeur ); if (Fb2f6fc62($sTypeOperateur) ){ $this->SetValeur( $clType->GetValeur() ); } return $Retour; } function& getProp($sNomPropriete="") { return GetValeur(GetProp($this->GetValeur() , $sNomPropriete )); } function F9656d042($prop,$valeur) { Operateur(95,GetProp($this->GetValeur() , $prop ),$valeur); } } class CValeurUniverselle extends CExpression { var $m_ValeurDefaut; function __construct($valeur) { parent::__construct($this,95); $this->m_ValeurDefaut = $valeur; } function& GetValeur() { return $this->m_ValeurDefaut; } function SetValeur($valeur) { $this->m_ValeurDefaut = $valeur; } function& Fc424b461() { $sRetour = VersChaine($this->GetValeur()); return $sRetour; } function F92cbba97(&$pclObj) { $nMethode = ucfirst(substr(get_class($this),1)); if (!is_callable(array($pclObj,$nMethode))) return $this->GetValeur(); return $pclObj->$nMethode($this); } } class CMaintenant extends CValeurUniverselle { var $m_clValeurComplete; function __construct() { parent::__construct(DateSys() . HeureSys()); $this->m_clValeurComplete = new FMK_Date($this->m_ValeurDefaut,'AAAAMMJJHHmmssLL'); $this->m_ValeurDefaut = $this->Fe630dfec(); } function Fe630dfec() { $valeur = $this->m_clValeurComplete->F0a6804f3(); return $this->m_ValeurDefaut = $valeur; } function F3e79cd3a() { $valeur = $this->m_clValeurComplete->Fe8fc8ad8(); return $this->m_ValeurDefaut = $valeur; } function F1b9bf8b8() { $valeur = $this->m_clValeurComplete->Ff6ae0492(); return $this->m_ValeurDefaut = $valeur; } function& F90e48f47() { return $this->m_clValeurComplete; } } class CObjetComposante extends CTypeComparable { function __construct($Valeur = null) { parent::__construct(null); $this->m_nIsXXX = 256; if (null !== $Valeur) { $this->Fcc4f5b5d($Valeur); } } function& F4d78046e() { return $this->GetValeur(); } function F504ed4dc() { return get_class_vars(get_class($this)); } function F1b8e122c($Valeur) { if (!is_object($Valeur) || $Valeur->m_nIsXXX !== 256 || !$this->F124f1186($Valeur)) return null; return $Valeur; } function F39f2478a() { $sClass = get_class($this); $this->Fcc4f5b5d(new $sClass()); return true; } function& __GetType() { $t = TYPEWL_DINO; return $t; } function F124f1186($pclDino) { return get_class($pclDino)===get_class($this);} function F9656d042($prop,$valeur) { if (is_object($valeur)) { if($valeur->m_nIsXXX === 64) Fe81a7f9e('ERR_PARAMETRE_TYPE_INCORRECT','OPERATEURWL_NOM_95',F3b9ec4ca($valeur),F3b9ec4ca($this->F8d3db64f($prop))); if($valeur->m_nIsXXX !== 256) return $this->F9656d042($prop,GetValeur($valeur)); } $sFonc = F2080fcae($prop,SETTER_PROPRIETE); if (is_callable(array($this,$sFonc))) { $this->{$sFonc}($valeur); return true; } return false; } function& Fcc4f5b5d( $pclDino ) { if (null !== $pclDino) { $clDino = $this->F1b8e122c($pclDino); if (isset($clDino)) { foreach (array_keys($this->F504ed4dc()) as $sNomMembre) { if (is_object($this->$sNomMembre)) { $this->$sNomMembre = _clone($clDino->$sNomMembre); } else { $this->$sNomMembre = $clDino->$sNomMembre; } } } else { return Erreur('ErreurGenerique',FMK_ChaineConstruit(Fc34ec142('TYPE_INCOMPATIBLE'),F3b9ec4ca($this),F3b9ec4ca($clDino))); } } return $this; } function& operateurSub( $clMembre ) { return $this->getProp(VersPrimitif($clMembre)); } function& Fc91f0eb7( $Valeur, $clMembre ) { return $this->F9656d042(VersPrimitif($clMembre),$Valeur); } function Ffe33562a() { return false; } function F35be7f7f($bPourJSON=false) { $return = serialize($this); if ($bPourJSON) { $return = '"'.utf8_html_entity_decode($return,ENT_QUOTES).'"'; } return $return; } function F4629642a($str) { $this->Fcc4f5b5d(deserialize($str)); } } function TYPE_DinoRendezVous_SauveContexte(&$projet) { $projet->TabVarGlobaleInterneComposante['TYPE_DinoRendezVous'] = array(); global $__gdwIDUnique; $projet->TabVarGlobaleInterneComposante['TYPE_DinoRendezVous']['__gdwIDUnique'] = $__gdwIDUnique; } F0ce8ab0e('TYPE_DinoRendezVous_SauveContexte'); function TYPE_DinoRendezVous_RestaureContexte(&$projet) { if (isset($projet->TabVarGlobaleInterneComposante['TYPE_DinoRendezVous'] )) { global $__gdwIDUnique; $__gdwIDUnique = $projet->TabVarGlobaleInterneComposante['TYPE_DinoRendezVous']['__gdwIDUnique']; } } F493cdf66('TYPE_DinoRendezVous_RestaureContexte'); class CDinoRendezVous extends CObjetComposante { var $m_clPeriodicite = null; var $m_sTitre = ''; var $m_clDateDebut = null; var $m_clDateFin = null; var $m_sContenu = ''; var $m_sAuteur = ''; var $m_sLieu = ''; var $m_sInvite = ''; var $m_sCategorie = ''; var $m_nImportance = 0; var $m_sNote = ''; var $m_sImage = ''; var $m_sID = ''; var $m_sBulle = ''; var $m_sRessource = ''; var $m_dwIDUnique; var $m_clCouleur; var $m_hPositionHF = -1; var $m_clDateDebutReel = null; var $m_clDateFinReel = null; var $m_bEstUnCInstEvenementAgendaRepete = false; var $m_pclCInstEvenementMultiJourSur1Jour = null; var $m_bJourneeEntiere = false; var $m_nNbMaxSuperpositon = 0; function __construct($Valeur=null) { TYPE_Include(TYPEWL_DATEHEURE); $this->m_clDateDebut = new CDateAgenda(); $this->m_clDateFin = new CDateAgenda(); $this->m_clPeriodicite = new CDinoRepetition(); $this->m_clCouleur = new CCouleur(dwCODEAutomatique); $this->m_clDateDebutReel= new CDateAgenda(); $this->m_clDateFinReel = new CDateAgenda(); parent::__construct($Valeur); global $__gdwIDUnique; if (!isset($__gdwIDUnique)) $__gdwIDUnique = 1; else ++$__gdwIDUnique; $this->m_dwIDUnique = $__gdwIDUnique; } function F504ed4dc() { $tabMembresCopiables = get_class_vars(get_class($this)); unset($tabMembresCopiables['m_dwIDUnique']); return $tabMembresCopiables; } function F16b970ec( $pclEvenement ) { $clDateDebutJ = new CDateAgenda(); $clDateFinJ = new CDateAgenda(); $pclEvenement->F2bc4c738( $clDateDebutJ, $clDateFinJ ); $this->F2bc4c738( $this->m_clDateDebutReel, $this->m_clDateFinReel ); if ( $clDateFinJ->Ffe96069b($this->m_clDateDebutReel) ) return false; if ( $this->m_clDateFinReel->Ffe96069b($clDateDebutJ) ) return false; return true; } function F2afa79e5($hPosHF, $hPosDINO) { $this->m_hPositionHF = $hPosHF; } function F9f43fae3(&$pclEve) { if ($this->m_bEstUnCInstEvenementAgendaRepete === true) { $pclEve = $this; return true; } return false; } function F29893c95(&$pclEve) { if ($this->m_pclCInstEvenementMultiJourSur1Jour !== null) { $pclEve = $this->m_pclCInstEvenementMultiJourSur1Jour; return true; } return false; } function Fb8d1ae4b($pszRessourceCherche) { $sValeurMemorisee = ''; $sValeurAffichee = ''; $bPossedeGARecuperer = false; $clGLien = null; $clGLien2 = null; $bGLien1 = false; $bGLien2 = false; XVERIFY( F159221ea($pszRessourceCherche,$bGLien1,$bPossedeGARecuperer,$clGLien,$sValeurAffichee) ); XVERIFY( F159221ea($this->m_sRessource,$bGLien2,$bPossedeGARecuperer,$clGLien2,$sValeurAffichee) ); if ($bGLien1 || $bGLien2) { $pszRessourceRechGLien = $pszRessourceCherche; if ($bGLien1===true) $pszRessourceRechGLien = $clGLien; $pszRessourceRechGLienThis = $this->m_sRessource; if ($bGLien2===true) $pszRessourceRechGLienThis = $clGLien2; if (F6b6a70c8($pszRessourceRechGLien, $pszRessourceRechGLienThis, 2)) { return true; } } return F6b6a70c8($pszRessourceCherche, $this->m_sRessource, 2); } function F1cb01ddc() { return ($this->m_clDateDebut->m_dwDate !== $this->m_clDateFin->m_dwDate) && ($this->m_clDateFin->Fa68634db($this->m_clDateDebut)); } function Fd1226579() { if ($this->m_clPeriodicite->F10535d12() && !$this->F9f43fae3(getRef(null))) { $cl1erDateValide = new CDateAgenda(); if (!$this->m_clPeriodicite->Fef64a8b2( $this->m_clDateDebut, $this->m_clDateDebut, 0, $cl1erDateValide )) return true; if (!$this->m_clDateDebut->F0ee5647e($cl1erDateValide)) return true; } return false; } function F2bc4c738(&$pclDateDebut, &$pclDateFin) { $pclDateDebut->F278c4330( $this->m_clDateDebut ); $pclDateFin->F278c4330( $this->m_clDateFin ); if ($this->m_clDateFin->Ffe96069b($this->m_clDateDebut)) $pclDateFin->F278c4330( $this->m_clDateDebut ); if ($this->m_clPeriodicite->F10535d12() && !$this->F9f43fae3(getRef(null))) { $cl1erDateValide = new CDateAgenda(); if ($this->m_clPeriodicite->Fef64a8b2( $this->m_clDateDebutRdv, $this->m_clDateDebutRdv, 0, $cl1erDateValide )) { $pclDateDebut->F278c4330( $cl1erDateValide ); $pclDateFin->F278c4330( $cl1erDateValide ); $this->Fc47e8adf($pclDateFin); } } if (false !== $this->m_bJourneeEntiere) { $pclDateDebut->Fadb98d95(); $pclDateFin->Fadb98d95(); $pclDateFin->F35ed58e9(); } } function F9aa2e207(&$pclDateDebut, &$pclDateFin, $clResolution) { $this->F2bc4c738( $pclDateDebut, $pclDateFin ); if ($this->m_bJourneeEntiere) { $pclDateDebut->Fadb98d95(); $pclDateFin->Fadb98d95(); $pclDateFin->F35ed58e9(); return; } if ( floor($clResolution/MILLI_PAR_JOUR) >=1) { $pclDateDebut->Fadb98d95(); if ($pclDateFin->F55439573() > 12) { $pclDateFin->F35ed58e9(); } else { $pclDateFin->Fadb98d95(); } } if ($clResolution === 43200000) { $pclDateDebut->F65d82433($clResolution); $pclDateFin->F07ec168c(); $pclDateFin->F65d82433($clResolution); $pclDateFin->F5c1f4197(); } if ($pclDateFin->F874b87d7($pclDateDebut)) { $pclDateFin->F278c4330( $pclDateDebut ); $pclDateFin->F2bc25f7f($clResolution); } } function Fc47e8adf(&$pclDate) { $nDuree = 0; F0744b8b4( $this->m_clDateFin, $this->m_clDateDebut, $nDuree); XVERIFY( $pclDate->F2bc25f7f( $nDuree) ); } function F35877954($clDateDebut, $clDateFin , $nFlag) { if ($clDateDebut->m_dwDate === 0) return false; if ($clDateFin->m_dwDate === 0) return false; if (Fdef56c7f($nFlag,4)) { if ($clDateFin->Ffe96069b( $this->m_clDateDebut ) ) return false; if ($clDateDebut->Fa68634db( $this->m_clDateFin ) ) return false; return true; } $this->F2bc4c738($this->m_clDateDebutReel, $this->m_clDateFinReel); if ($clDateFin->Ffe96069b( $this->m_clDateDebutReel ) ) return false; if ($clDateDebut->Fa68634db( $this->m_clDateFinReel ) ) return false; return true; } function F41dfd0d7($clDateDebut, $clDateFin) { $this->m_clDateDebut->F278c4330($clDateDebut); $this->m_clDateFin->F278c4330( $clDateFin ); } function& Fb27fa891( $pclRepetitionPrec, $clDateDebut, $clDateFin, $nIndiceRepetition ) { $pclNewEveRepete = null; if (!$this->m_clPeriodicite->m_bAvecRepetition) return $pclNewEveRepete; if (!$this->m_clDateDebut->F5020c4dd()) return $pclNewEveRepete; $clDateDebutThis = new CDateAgenda($this->m_clDateDebut); if ($clDateFin->Ffe96069b($clDateDebutThis) ) return $pclNewEveRepete; $clDateDepartCalc = new CDateAgenda($clDateDebutThis); if ($pclRepetitionPrec !== null) $clDateDepartCalc = $pclRepetitionPrec->m_clDateDebut; $clDateProchaineRepetition = new CDateAgenda(); if (!$this->m_clPeriodicite->Fef64a8b2( $clDateDepartCalc, $clDateDebut, $nIndiceRepetition, $clDateProchaineRepetition )) { return $pclNewEveRepete; } if ($clDateProchaineRepetition->F2d31d251($clDateFin)) return $pclNewEveRepete; if ($clDateFin->F874b87d7($clDateDepartCalc)) { return null; } $pclNewEveRepete = _clone($this); $pclNewEveRepete->m_bEstUnCInstEvenementAgendaRepete = true; $pclNewEveRepete->m_clDateDebut = $clDateProchaineRepetition; $clDateFinProchaineRepetition = new CDateAgenda($clDateProchaineRepetition); $this->Fc47e8adf( $clDateFinProchaineRepetition); $pclNewEveRepete->m_clDateFin = $clDateFinProchaineRepetition; return $pclNewEveRepete; } function& GetTitre() {return $this->m_sTitre;} function SetTitre($sTitre) {$this->m_sTitre = $sTitre;} function& GetCouleurFond() {return $this->m_clCouleur->m_dwColor;} function SetCouleurFond($nCouleurFond) {$this->m_clCouleur = new CCouleur($nCouleurFond);} function& GetDateDebut() {$return=new CDateHeure($this->m_clDateDebut->VersChaine());return $return;} function SetDateDebut($clDateDebut) {$this->m_clDateDebut = new CDateAgenda($clDateDebut);} function& GetDateFin() {$return=new CDateHeure($this->m_clDateFin->VersChaine());return $return;} function SetDateFin($clDateFin) {$this->m_clDateFin = new CDateAgenda($clDateFin);} function& GetContenu() {return $this->m_sContenu;} function SetContenu($sContenu) {$this->m_sContenu = $sContenu;} function& GetAuteur() {return $this->m_sAuteur;} function SetAuteur($sAuteur) {$this->m_sAuteur = $sAuteur;} function& GetLieu() {return $this->m_sLieu;} function SetLieu($sLieu) {$this->m_sLieu = $sLieu;} function& GetInvite() {return $this->m_sInvite;} function SetInvite($sInvite) {$this->m_sInvite = $sInvite;} function& GetCategorie() {return $this->m_sCategorie;} function SetCategorie($sCategorie) {$this->m_sCategorie = $sCategorie;} function& GetImportance() {return $this->m_nImportance;} function SetImportance($nImportance) {$this->m_nImportance = $nImportance;} function& GetNote() {return $this->m_sNote;} function SetNote($sNote) {$this->m_sNote = $sNote;} function& GetImage() {return $this->m_sImage;} function SetImage($sImage) {$this->m_sImage = $sImage;} function& GetID() {return $this->m_sID;} function SetID($sID) {$this->m_sID = $sID;} function& GetBulle() {return $this->m_sBulle;} function SetBulle($sBulle) {$this->m_sBulle = $sBulle;} function& GetRessource() {return $this->m_sRessource;} function SetRessource($sRessource) {$this->m_sRessource = $sRessource;} function& GetAvecRepetition() {return $this->m_clPeriodicite->m_bAvecRepetition;} function SetAvecRepetition(&$bAvecRepetition){$this->m_clPeriodicite->m_bAvecRepetition = $bAvecRepetition;} function& GetRepetition() {return $this->m_clPeriodicite;} function SetRepetition(&$pclRepetition) { $bAvecRepetition = $this->m_clPeriodicite->m_bAvecRepetition; $this->m_clPeriodicite->F13f7f45b( $pclRepetition ); $this->m_clPeriodicite->m_bAvecRepetition = $bAvecRepetition; } function& GetJourneeEntiere() {return $this->m_bJourneeEntiere;} function SetJourneeEntiere($b) {$this->m_bJourneeEntiere = $b;} } define('TASK_SCHEDULER_IE1',1); define('TASK_SCHEDULER_IE2',2); define('TASK_SCHEDULER_IE3',3); define('TASK_SCHEDULER_IE4',4); define('TASK_SCHEDULER_IE5',5); define('nCHANGE_YEAR', 3); define('nCHANGE_MONTH', 2); define('nCHANGE_DAY', 1); define('nCHANGE_NONE', 0); class CTaskScheduleInfo extends stSTRUCTURE { var $m_nMonth ='000000000000'; var $m_nDay ='0000000000000000000000000000000'; var $m_nDayOfWeek ='0000000'; var $m_nHour ='000000000000000000000000'; var $m_nMinute ='000000000000000000000000000000000000000000000000000000000000'; var $m_bDayOr=false; function Fb14563d0($pszMonth, $pszDay, $pszDayOfWeek, $pszHour, $pszMinute, $bDayOr, &$pnNumErr, &$ppszPosErr) { $nMonth ='000000000000'; $nDay ='0000000000000000000000000000000'; $nDayOfWeek ='0000000'; $nHour ='000000000000000000000000'; $nMinute ='000000000000000000000000000000000000000000000000000000000000'; if ( ($pszMonth=='') && (($pszDay!='' || $pszDayOfWeek!=''))) { $pszMonth='*'; } if (!$this->Ff45967dc($pszMonth, $nMonth, 12, array('sunday','dimanche','monday','lundi','tuesday','mardi','wednesday','mercredi','thursday','jeudi','friday','vendredi','saturday','samedi'), $pnNumErr, $ppszPosErr )) return false; if (!$this->Ff45967dc($pszDay, $nDay, 31, null, $pnNumErr, $ppszPosErr)) return false; if (!$this->Ff45967dc($pszDayOfWeek, $nDayOfWeek, 7, array('january','janvier','february',Fd7624002('février'),'march','mars','april','avril','may','mai','june','juin','july','juillet','august',Fd7624002('août'),'septmber','septembre','october','octobre','november','novembre','december',Fd7624002('décembre')), $pnNumErr, $ppszPosErr)) return false; if (!$this->Ff45967dc($pszHour, $nHour, 23, null ,$pnNumErr, $ppszPosErr)) return false; if (!$this->Ff45967dc($pszMinute, $nMinute, 59, null ,$pnNumErr, $ppszPosErr)) return false; $this->m_nMonth = $nMonth; $this->m_nDay = $nDay; $this->m_nDayOfWeek = $nDayOfWeek; $this->m_nHour = $nHour; $this->m_nMinute = $nMinute; $this->m_bDayOr = $bDayOr; return true; } function F6746ab9b( &$pnBits, $nVal ) {XVALIDSTRING($pnBits[$nVal]); $pnBits[$nVal] = '1';} function F23e11e13( $pnBits, $nVal ) {XVALIDSTRING($pnBits[$nVal]); return $pnBits[$nVal] === '1';} function F2841f34c($nMonth) { return $this->F23e11e13($this->m_nMonth,$nMonth); } function F6be8cd6c($nDay) { return $this->F23e11e13($this->m_nDay,$nDay); } function F6db208e9($nDayOfWeek) { return $this->F23e11e13($this->m_nDayOfWeek,$nDayOfWeek); } function F4378fdef($nHour) { return $this->F23e11e13($this->m_nHour,$nHour); } function Faf664920($nMinute) { return $this->F23e11e13($this->m_nMinute,$nMinute); } function Ff45967dc($pszField, &$pnBits, $nMax, $ppszName,&$pnNumErr, &$ppszPosErr) { $pnNumErr = 0; $start = 0; $stop = 0; $step = 0; $i = 0; while($pszField !== '') { $start = $stop = $step = 0 ; if( $pszField[0] === ',' || $pszField[0] === '\t' || $pszField[0] === ' ' ) $pszField = utf8_substr($pszField,1); if( $pszField[0] === '*' ) { $start = 0; $stop = ( $nMax === 12 ) ? 11 : $nMax; $pszField = utf8_substr($pszField,1); } else { $pszField = $this->Fa39374b4($pszField, $start, $nMax, $ppszName, $pnNumErr, $ppszPosErr); if ($pszField === null) return false; if(!isset($pszField[0]) || $pszField[0] === ',' || $pszField[0] === ' ' || $pszField[0] === '\t') { $this->F6746ab9b($pnBits, $start); continue; } else if( $pszField[0] === '-' ) { $pszField = utf8_substr($pszField,1); $pszField = $this->Fa39374b4($pszField, $stop, $nMax, $ppszName, $pnNumErr, $ppszPosErr); if ($pszField === null) return false; } else { $pnNumErr = TASK_SCHEDULER_IE3; $ppszPosErr = $pszField; return false; } } if( $pszField[0] === '/' ) { $pszField = utf8_substr($pszField,1); $nMaxParam = $nMax; if ($nMax===12) $nMaxParam=6; $pszField = $this->Fa39374b4($pszField, $step, $nMaxParam, $ppszName, $pnNumErr, $ppszPosErr); if ($pszField === null) return false; } else { $step = 1; } if($start < $stop) { for ($i = $start; $i <= $stop; $i += $step) $this->F6746ab9b($pnBits, $i); } else { $field_max = ( $nMax === 12 ) ? 11 : $nMax; for($i = $start; $i <= $field_max; $i += $step) $this->F6746ab9b($pnBits, $i); for($i -= ($field_max + 1); $i <= $stop; $i += $step) $this->F6746ab9b($pnBits, $i); } } if( $nMax === 7 ) { if( $this->F23e11e13($pnBits, 0) ) $this->F6746ab9b($pnBits, 7); else if( F23e11e13($pnBits, 7) ) $this->F6746ab9b($pnBits, 0); } return true; } function Fa39374b4( $pszField, &$pnValue, $nMax, $ppszName, &$pnNumErr, &$ppszPosErr) { $pnValue = 0; if( !is_numeric($pszField) ) { $i = 0; if( $ppszName !== null ) { for($i = 0; isset($ppszName[$i]); ++$i) { if( utf8_strncasecmp($pszField, $ppszName[$i], utf8_strlen($ppszName[$i])) === 0 ) { $pnValue = intval($i/2); $pszField = utf8_substr($pszField,utf8_strlen($ppszName[$i])); return $pszField; } } } $pnNumErr = TASK_SCHEDULER_IE1; $ppszPosErr = $pszField; return null; } else { $pnValue = intval($pszField); if( $pnValue > $nMax ) { $pnNumErr = TASK_SCHEDULER_IE2; $ppszPosErr = $pszField; return null; } while( is_numeric($pszField[0]) ) $pszField = utf8_substr($pszField,1); if( $nMax === 12 ) { $pnValue -= 1; } } return $pszField; } function F9e5c302e($pstNow, &$pstNextSchedule) { $pstNextSchedule->F278c4330($pstNow); $nYearLimit = 100; $nHasChanged = nCHANGE_NONE; $nMaxDay = 0; return $this->F92e49ea3($pstNow, $pstNextSchedule, null, $nYearLimit, $nHasChanged, $nMaxDay); } function F92e49ea3($pstNow, &$pstNextSchedule, $__goto, &$nYearLimit, &$nHasChanged, &$nMaxDay) { if (!isset($__goto) || $__goto==='setMonth'){unset($__goto); if( $pstNextSchedule->tm_year-$pstNow->tm_year > 100 ) return false; if( !$this->F75412633( $pstNextSchedule, $nHasChanged, $nYearLimit) ) return false; $nMaxDay = date('t',mktime(0,0,0,$pstNextSchedule->tm_mon+1,1,$pstNextSchedule->tm_year+1900)); }if (!isset($__goto) || $__goto==='setDay'){unset($__goto); if(!$this->F197e8a7d( $pstNextSchedule, $nHasChanged, $nMaxDay) ) return $this->F92e49ea3($pstNow,$pstNextSchedule,'setMonth',$nYearLimit,$nHasChanged,$nMaxDay); }if (!isset($__goto) || $__goto==='setHour'){unset($__goto); if(!$this->F92ebff0e( $pstNextSchedule, $nHasChanged, $nMaxDay) ) { if ($nHasChanged === nCHANGE_MONTH) return $this->F92e49ea3($pstNow,$pstNextSchedule,'setMonth',$nYearLimit,$nHasChanged,$nMaxDay); return $this->F92e49ea3($pstNow,$pstNextSchedule,'setDay',$nYearLimit,$nHasChanged,$nMaxDay); } if(!$this->F8a5836b8( $pstNextSchedule ) ) return $this->F92e49ea3($pstNow,$pstNextSchedule,'setHour',$nYearLimit,$nHasChanged,$nMaxDay); return true; } } function F8a5836b8(&$pstTime ) { if (utf8_strpos($this->m_nMinute,'1') === false) { if ($pstTime->tm_min === 0) return true; ++$pstTime->tm_hour; $pstTime->tm_min = 0; return false; } $i = 0; for($i=$pstTime->tm_min; !$this->Faf664920($i) && ($i<60); ++$i); if ($i >= 60) { ++$pstTime->tm_hour; $pstTime->tm_min = 0; return false; } $pstTime->tm_min = $i; return true; } function F92ebff0e( &$pstTime, &$pnHasChanged, $nMaxDay ) { $i = 0; for ($i=$pstTime->tm_hour; !$this->F4378fdef($i) && ($i<24); ++$i); if($i >= 24) { if ($pstTime->tm_mday+1 > $nMaxDay) { $pnHasChanged = nCHANGE_MONTH; $this->F41a9126f($pstTime); $pstTime->tm_hour = 0; $pstTime->tm_min = 0; $pstTime->tm_mday=1; $this->Fc59deca8($pstTime); return false; } ++$pstTime->tm_mday; if( $pnHasChanged < nCHANGE_DAY) { $pnHasChanged = nCHANGE_DAY; $pstTime->tm_hour = 0; $pstTime->tm_min = 0; } else { $pstTime->tm_hour = 0; } return false; } if( $pstTime->tm_hour != i ) { $pstTime->tm_hour = i; $pstTime->tm_min = 0; } return true; } function F197e8a7d(&$pstTime, &$pnHasChanged, $nMaxDay ) { if( $this->m_bDayOr ) return $this->F80cc1120( $pstTime, $pnHasChanged, $nMaxDay ); else return $this->F98a7ee62( $pstTime, $pnHasChanged, $nMaxDay ); } function F98a7ee62(&$pstTime, &$pnHasChanged, $nMaxDay ) { $i = 0; while(true){ for($i = $pstTime->tm_mday; !$this->F6be8cd6c($i) && ($i <= $nMaxDay); ++$i); if($i > $nMaxDay) { $this->F41a9126f($pstTime); if( $pnHasChanged < nCHANGE_MONTH) { $pnHasChanged = nCHANGE_MONTH; $pstTime->tm_mday = 1; $pstTime->tm_hour = 0; $pstTime->tm_min = 0; } else { $pstTime->tm_mday = 1; $this->Fc59deca8($pstTime); } return false; } if( $pstTime->tm_mday != $i ) { $pstTime->tm_mday = $i; if ( $pnHasChanged < nCHANGE_DAY) { $pnHasChanged = nCHANGE_DAY; $pstTime->tm_hour = 0; $pstTime->tm_min = 0; } } $this->Fc59deca8(pstTime); if( !$this->F6db208e9($pstTime->tm_wday) ) { ++$pstTime->tm_mday; $pstTime->tm_hour = 0; $pstTime->tm_min = 0; continue; } return true; }} function Fc59deca8($pstTime) { $pstTime->tm_wday = date('w',mktime($pstTime->tm_hour,$pstTime->tm_min,$pstTime->tm_sec,$pstTime->tm_mon+1,$pstTime->tm_mday,$pstTime->tm_year+1900)); } function F41a9126f(&$pstTime) { ++$pstTime->tm_mon; if ($pstTime->tm_mon>=12) { $pstTime->tm_mon=0; ++$pstTime->tm_year; } } function F80cc1120( &$pstTime, &$pnHasChanged, $nMaxDay ) { $this->Fc59deca8($pstTime); $nJourSemaine = $pstTime->tm_wday; $nJourDuMois = $pstTime->tm_mday; while( !$this->F6be8cd6c($nJourDuMois) && !$this->F6db208e9($nJourSemaine) ) { if($nJourDuMois+1 > $nMaxDay) { $this->F41a9126f($pstTime); if ( $pnHasChanged < nCHANGE_MONTH) { $pnHasChanged = nCHANGE_MONTH; $pstTime->tm_mday = 1; $pstTime->tm_hour = 0; $pstTime->tm_min = 0; } else { $pstTime->tm_mday = 1; $this->Fc59deca8($pstTime); } return false; } if ($nJourSemaine >= 7) $nJourSemaine -= 7; ++$nJourDuMois; ++$nJourSemaine; } if ( $pstTime->tm_mday !== $nJourDuMois ) { $pstTime->tm_mday = $nJourDuMois; if ( $pnHasChanged < nCHANGE_DAY) { $pnHasChanged = nCHANGE_DAY; $pstTime->tm_hour = 0; $pstTime->tm_min = 0; } } return true; } function F75412633(&$pstTime, &$pnHasChanged, &$pnYearLimit) { $nMois = $pstTime->tm_mon; while(true) { for($nMois = $pstTime->tm_mon; !$this->F2841f34c(nMois) && ($nMois<12); ++$nMois); if($nMois >= 12) { ++$pstTime->tm_year; if( (--$pnYearLimit) <= 0) { return false; } if( $pnHasChanged < nCHANGE_YEAR) { $pnHasChanged = nCHANGE_YEAR; $pstTime->tm_mon = 0; $pstTime->tm_mday = 1; $pstTime->tm_hour = 0; $pstTime->tm_min = 0; } else { $pstTime->tm_mon = 0; } continue; } if($pstTime->tm_mon !== $nMois) { $pstTime->tm_mon = $nMois; if( $pnHasChanged < nCHANGE_MONTH) { $pnHasChanged = nCHANGE_MONTH; $pstTime->tm_mday = 1; $pstTime->tm_hour = 0; $pstTime->tm_min = 0; } } return true; } } } class CDinoRepetition extends CObjetComposante { var $m_bAvecRepetition = false; var $m_ePeriodicite = eagTousLesJours; var $m_nPeriode = 1; var $m_eTypeFin = eagPasDeFin; var $m_clDateFin = null; var $m_nNbOccurenceMax = 0; var $m_pclModeAvance = null; var $m_czJourDuMois = ''; var $m_czJourDeLaSemaine = ''; var $m_czMois = ''; var $m_czHeure = ''; var $m_czMinute = ''; var $m_bJourDuMoisOuDeLaSemaine = true; var $m_pclChampAgenda = null; function __construct($Valeur=null) { parent::__construct($Valeur); TYPE_Include(TYPEWL_DATEHEURE); if (!isset($this->m_clDateFin)) $this->m_clDateFin = new CDateAgenda(); } function F10535d12() {return $this->m_bAvecRepetition && ($this->m_ePeriodicite === eagRepetitionAvancee);} function F13f7f45b(&$rclSource) { $this->m_bAvecRepetition = $rclSource->m_bAvecRepetition; $this->m_ePeriodicite = $rclSource->m_ePeriodicite; $this->m_nPeriode = $rclSource->m_nPeriode; $this->m_eTypeFin = $rclSource->m_eTypeFin; $this->m_clDateFin = new CDateAgenda($rclSource->m_clDateFin); $this->m_nNbOccurenceMax = $rclSource->m_nNbOccurenceMax; $this->m_czJourDuMois = $rclSource->m_czJourDuMois; $this->m_czJourDeLaSemaine = $rclSource->m_czJourDeLaSemaine; $this->m_czMois = $rclSource->m_czMois; $this->m_czHeure = $rclSource->m_czHeure; $this->m_czMinute = $rclSource->m_czMinute; $this->m_bJourDuMoisOuDeLaSemaine = $rclSource->m_bJourDuMoisOuDeLaSemaine; $this->m_pclModeAvance = null; if ($rclSource->m_pclModeAvance !== null) { $this->m_pclModeAvance = new CTaskScheduleInfo($rclSource->m_pclModeAvance); } } function Ffe96569d( ) { if ($this->m_pclModeAvance === null) { $this->m_pclModeAvance = new CTaskScheduleInfo(); } $nNumErr=0; $pszPosErr=''; if (!$this->m_pclModeAvance->Fb14563d0( $this->m_czMois, $this->m_czJourDuMois, $this->m_czJourDeLaSemaine, $this->m_czHeure, $this->m_czMinute, $this->m_bJourDuMoisOuDeLaSemaine, $nNumErr, $pszPosErr )) { F67cfd262(); Fdd46bacf(FMK_ChaineConstruit('ERR_INVALIDPARAM_PERIODE',$pszPosErr)); return false; } return true; } function F25fd891a($ePropriete) { } function Fa9cb98f2($pszVal, &$czMembre) { $czSauve = $czMembre; $czMembre = $pszVal; if (!$this->Fd2b50e6c()) { $czMembre = $czSauve; return false; } $this->F25fd891a(PROP_INVALID_MIN); return true; } function Fd2b50e6c() { $this->m_ePeriodicite = eagRepetitionAvancee; if (!$this->Ffe96569d( )) return false; return true; } function F657f8380( &$pclDateRepetition ) { if ($this->m_pclModeAvance === null) { return false; } $bSansHeure = (($this->m_pclModeAvance->m_nHour === 0) && ($this->m_pclModeAvance->m_nMinute === 0)); $clDateHeureAvant = new CDateAgenda($pclDateRepetition); if ($bSansHeure) { $pclDateRepetition->Fadb98d95(); $pclDateRepetition->Fee154cfe(1); } else { $pclDateRepetition->bDecaleMinute(1); } $clNow = new tm(); $clNow->Ff663e557($pclDateRepetition); $stDatSuivante = new tm(); if (!$this->m_pclModeAvance->F9e5c302e( $clNow, $stDatSuivante )) return false; $clResultat = new SYSTEMTIME(); $stDatSuivante->F74cf49a4($clResultat); $pclDateRepetition->Fea34dd7d($clResultat); if ($bSansHeure) { $pclDateRepetition->m_dwHeure = $clDateHeureAvant->m_dwHeure; } return true; } function Fbafc6e24( &$pclDateRepetition ) { switch ($this->m_ePeriodicite) { case eagTousLesJours: $pclDateRepetition->Fee154cfe(1); return true; case eagToutesLesSemaines: $pclDateRepetition->Fee154cfe(7); return true; case eagTousLesMois: $pclDateRepetition->F328928c5(1); return true; case eagTousLesAns: $pclDateRepetition->F7fae8dcf(1); return true; case eagRepetitionAvancee: return $this->F657f8380( $pclDateRepetition ); default: return false; } } function Fef64a8b2( $clDateDebutRepete, $clDateMin, $nIndiceRepetition, &$pclDateRepetition ) { if (!$this->m_bAvecRepetition) return false; if (!$clDateDebutRepete->F5020c4dd()) return false; $eTypeFin = $this->m_eTypeFin; if (($eTypeFin === eagPasDeFin) && $this->m_clDateFin->F5020c4dd()) $eTypeFin = eagDateFin; if (($eTypeFin === eagPasDeFin) && $this->m_nNbOccurenceMax > 0) $eTypeFin = eagOccurrenceMax; if (($eTypeFin === eagDateFin) && !$this->m_clDateFin->F5020c4dd()) return false; if ( ( $clDateDebutRepete->Fa68634db($clDateMin) )) return false; $nNbOccurrence = 0; $pclDateRepetition->F278c4330( $clDateMin ); if ( ($this->m_ePeriodicite !== eagRepetitionAvancee) || (($this->m_pclModeAvance !== null) && ($this->m_pclModeAvance->m_nHour===0) && $this->m_pclModeAvance->m_nMinute===0) ) { $pclDateRepetition->F278c4330( $clDateDebutRepete ); } if (!$this->Fbafc6e24($pclDateRepetition)) return false; while ($pclDateRepetition->Ffe96069b($clDateMin)) { if (!$this->Fbafc6e24($pclDateRepetition)) return false; } ++$nNbOccurrence; if (($eTypeFin === eagOccurrenceMax) && ($nIndiceRepetition+$nNbOccurrence > $this->m_nNbOccurenceMax)) { return false; } if ($nNbOccurrence>100000) return false; if (($eTypeFin === eagDateFin) && $pclDateRepetition->Fa68634db($this->m_clDateFin)) return false; return true; } function& GetType() {return $this->m_ePeriodicite;} function SetType($ePeriodicite) {$this->m_ePeriodicite = $ePeriodicite;} function& F1fb083c5() {return $this->m_nPeriode;} function SetPeriode($nPeriode) {$this->m_nPeriode = $nPeriode; $this->F25fd891a(VALEUR);} function& GetTypeFin() {return $this->m_eTypeFin;} function SetTypeFin($eTypeFin) { if ( ($eTypeFin<0) || ($eTypeFin>=ePeriodicite_MaxInvalid) || ($eTypeFin == eagRepetitionAvancee) ) { Fb9eb0792('ERR_BAD_CONSTANT',$eTypeFin); return; } $this->m_eTypeFin = $eTypeFin; $this->F25fd891a(TYPE); } function& GetDateFin() { $return=$this->m_clDateFin->VersChaine(); return $return; } function SetDateFin($clDateFin) { $this->m_clDateFin = new CDateAgenda($clDateFin); $this->m_clDateFin->F35ed58e9(); $this->F25fd891a(PROP_INVALID_MIN); } function& GetNbOccurrence() {return $this->m_nNbOccurenceMax;} function SetNbOccurrence($nNbOccurrence) {$this->m_nNbOccurenceMax = $nNbOccurrence; $this->F25fd891a(OCCURRENCE);} function& GetHeure() {return $this->m_czHeure;} function SetHeure($czHeure) {$this->Fa9cb98f2($czHeure,$this->m_czHeure); } function& GetJourDeLaSemaine() {return $this->m_czJourDeLaSemaine;} function SetJourDeLaSemaine($czJourDeLaSemaine) {$this->Fa9cb98f2($czJourDeLaSemaine,$this->m_czJourDeLaSemaine);} function& GetJourDuMoisOuDeLaSemaine() {return $this->m_bJourDuMoisOuDeLaSemaine;} function SetJourDuMoisOuDeLaSemaine($bJourDuMoisOuDeLaSemaine) { $this->m_bJourDuMoisOuDeLaSemaine = $bJourDuMoisOuDeLaSemaine; $this->Fd2b50e6c(); $this->F25fd891a(PROP_INVALID_MIN); } function& GetJourDuMois() {return $this->m_czJourDuMois;} function SetJourDuMois($czJourDuMois) {$this->Fa9cb98f2($czJourDuMois,$this->m_czJourDuMois);} function& GetMinute() {return $this->m_czMinute;} function SetMinute($czMinute) {$this->Fa9cb98f2($czMinute,$this->m_czMinute);} function& GetMois() {return $this->m_czMois;} function SetMois($czMois) {$this->Fa9cb98f2($czMois,$this->m_czMois);} } class CDinoPlanningRessources extends CObjetComposante { var $m_pclPlanning = null; function __construct($Valeur=null) { parent::__construct($Valeur); } function& Fcb6e6668($i) { $null = null; if (!isset($this->m_pclPlanning)) { return $null; } if (!is_numeric($i)) { $i = $this->m_pclPlanning->F2b322ae7($i,2); if ($i === -1) return $null; } if (false === $this->m_pclPlanning->F75cd9976($i)) return $null; unset($null); return $this->m_pclPlanning->Fcb6e6668($i); } function& operateurSub( $nIndice ) { return $this->Fcb6e6668(VersPrimitif($nIndice)-1); } function& Fc91f0eb7( $Valeur, $nIndice ) { $pclRessource =& $this->Fcb6e6668(VersPrimitif($nIndice)-1); return $pclRessource->Fcc4f5b5d($Valeur); } function& GetOccurrence() {$return = count($this->m_pclPlanning->m_tabRessources,COUNT_NORMAL); return $return;} function& GetValeur() { return CreerType($Valeur,$this->m_sNomWL,TYPEWL_TABLEAU,$this->m_pclPlanning->m_tabRessources); } } class CDinoRessource extends CObjetComposante { var $m_cszNomComplet = ''; var $m_cszNomAffiche = ''; var $m_cszNomLogique = ''; var $m_czNomImageFondTitre = ''; function __construct($Valeur=null) { parent::__construct(null); $this->m_cszNomComplet = VersChaine($Valeur); $bContientGLien = $bContientGARecuperer = false; XVERIFY( F159221ea($this->m_cszNomComplet, $bContientGLien, $bContientGARecuperer, $this->m_cszNomLogique, $this->m_cszNomAffiche) ); unset($bContientGLien);unset($bContientGARecuperer); } function& GetTitre() { return $this->F1e31ec87(1); } function& F1e31ec87($eRessourceNom) { switch ($eRessourceNom) { default: case 0: return $this->m_cszNomComplet; case 1: return $this->m_cszNomAffiche; case 2: return $this->m_cszNomLogique; } } function RAZ () { $this->m_cszNomComplet = ''; $this->m_cszNomAffiche = ''; $this->m_cszNomLogique = ''; } function& Fcc4f5b5d($comparaison) { if ( ($comparaison->__GetType() !== $this->__GetType()) || !$this->F124f1186($comparaison) ) { Fe81a7f9e('TYPE_INCOMPATIBLE',F3b9ec4ca($this),F3b9ec4ca($comparaison)); } $this->m_cszNomComplet = $comparaison->m_cszNomComplet; $this->m_cszNomAffiche = $comparaison->m_cszNomAffiche; $this->m_cszNomLogique = $comparaison->m_cszNomLogique; return $this; } } function F6b6a70c8($pszRessource1, $rcszRessource2, $eRessourceNom) { switch ($eRessourceNom) { default: case 0: case 1: case 2: return (0 == utf8_strcasecmp($pszRessource1, $rcszRessource2)); } } class CDinoCollectionJeton extends CObjetComposante { var $m_pclChamp = null; function __construct($Valeur=null) { parent::__construct($Valeur); } function& Fa7a15ea0($i) { $null = null; if (!isset($this->m_pclChamp)) { return $null; } if (!isset($this->m_pclChamp->m_tabJetons[$i-1])) { return $null; } if (false === $this->m_pclChamp->F75cd9976($i)) return $null; unset($null); return $this->m_pclChamp->m_tabJetons[$i-1]; } function& operateurSub( $nIndice ) { return $this->Fa7a15ea0(VersPrimitif($nIndice)-1); } function& Fc91f0eb7( $Valeur, $nIndice ) { $pclJeton =& $this->Fa7a15ea0(VersPrimitif($nIndice)-1); return $pclJeton->Fcc4f5b5d($Valeur); } function& GetOccurrence() {$return = count($this->m_pclChamp->m_tabJetons,COUNT_NORMAL); return $return;} function& GetValeur() { return CreerType($Valeur,$this->m_sNomWL,TYPEWL_TABLEAU,$this->m_pclChamp->m_tabJetons); } } class CDINOCouleur extends CObjetComposante { var $Opacite = 255; function __construct($Valeur=null) { if (is_string($Valeur) && !empty($Valeur)) { if (is_numeric($Valeur)) { $Valeur = intval($Valeur); } else if ($Valeur[0]==='#' && strlen($Valeur)==7) { $Valeur = substr($Valeur,1); $Valeur = F4f6e8051(hexdec(substr($Valeur,0,2)),hexdec(substr($Valeur,2,2)),hexdec(substr($Valeur,4,2))); } else if (F61bc61eb($Valeur,'rgba(')) { $Valeur = explode(',',substr($Valeur,5,strlen($Valeur)-1-5)); $Valeur = F4f6e8051(inval($Valeur[0]),inval($Valeur[1]),inval($Valeur[2])); $this->Opacite = floatval($Valeur[3]); } else if (F61bc61eb($Valeur,'rgb(')) { $Valeur = explode(',',substr($Valeur,4,strlen($Valeur)-1-4)); $Valeur = F4f6e8051(inval($Valeur[0]),inval($Valeur[1]),inval($Valeur[2])); } else { $Valeur = null; } } parent::__construct($Valeur); } function F1b8e122c($Valeur) { if (parent::F1b8e122c($Valeur)) return $Valeur; $xValeur =& VersPrimitif($Valeur); if (!is_numeric($xValeur)) return null; $pclInit = new CDINOCouleur(); $pclInit->m_Valeur = $xValeur<0 ? $xValeur : F4f6e8051(Fadb05a7c($xValeur),F88bb47e1($xValeur),F72d1dde6($xValeur)); return $pclInit; } function F0162dfb3() { if ($this->m_Valeur<0) { return ''; } if ($this->Opacite==255) return '#'.$this->GetValeur(); return 'rgba(' . $this->GetRouge() . ','. $this->GetVert() . ','. $this->GetBleu() . ','. ($this->Opacite/255) . ')'; } function& GetRouge() { $return = Fadb05a7c($this->m_Valeur); return $return; } function SetRouge($clVal) { $this->m_Valeur=F4f6e8051($clVal,F88bb47e1($this->m_Valeur),F72d1dde6($this->m_Valeur)); } function& GetVert() { $return = F88bb47e1($this->m_Valeur); return $return; } function SetVert($clVal) { $this->m_Valeur=F4f6e8051(Fadb05a7c($this->m_Valeur),$clVal,F72d1dde6($this->m_Valeur)); } function& GetBleu() { $return = F72d1dde6($this->m_Valeur); return $return; } function SetBleu($clVal) { $this->m_Valeur=F4f6e8051(Fadb05a7c($this->m_Valeur),F88bb47e1($this->m_Valeur),$clVal); } function& GetTeinte() { $return = F338d69bf($this->m_Valeur); return $return; } function SetTeinte($clVal) { $T = $L = $S = 0; F043b1c5e($clCouleur->m_dwColor,$T,$L,$S); $this->m_Valeur=F5e769b88($clVal,$L,$S); } function& GetSaturation() { $return = F8663c22b($this->m_Valeur); return $return; } function SetSaturation($clVal) { $T = $L = $S = 0; F043b1c5e($clCouleur->m_dwColor,$T,$L,$S); $this->m_Valeur=F5e769b88($T,$L,$clVal); } function& GetLuminosite() { $return = F688097ae($this->m_Valeur); return $return; } function SetLuminosite($clVal) { $T = $L = $S = 0; F043b1c5e($clCouleur->m_dwColor,$T,$L,$S); $this->m_Valeur=F5e769b88($T,$clVal,$S); } function& GetOpacite() { $return = $this->Opacite; return $return; } function SetOpacite($clVal) { $this->Opacite=$clVal; } function& GetCouleur() { $return = $this->m_Valeur; return $return; } function SetCouleur($clVal) { $this->m_Valeur=$clVal; } }; class CDinoMarqueur extends CObjetComposante { var $m_sNom; var $m_clPosition; var $m_sDescription=''; var $m_sImage=''; var $m_sActionClic=''; var $m_eAlignement=0; function __construct($Valeur=null) { parent::__construct(null); $this->m_clPosition = new CDinoGeoPosition($Valeur); $this->m_sNom = uniqid('marker',true); } function& GetNom() {return $this->m_sNom;} function SetNom($sNom) {$this->m_sNom = $sNom;} function& GetPosition() {return $this->m_clPosition;} function SetPosition($clPosition) {Operateur(95,$this->m_clPosition,$clPosition);} function& GetDescription() {return $this->m_sDescription;} function SetDescription($sDescription) {$this->m_sDescription = $sDescription;} function& GetImage() {return $this->m_sImage;} function SetImage($sImage) {$this->m_sImage = $sImage;} function& GetActionClic() {return $this->m_sActionClic;} function SetActionClic($sActionClic) {$this->m_sActionClic = $sActionClic;} function& GetAlignement() {return $this->m_eAlignement;} function SetAlignement($Alignement) {$this->m_eAlignement = $Alignement;} } class CDinoGeoPosition extends CObjetComposante { var $m_dLatitude; var $m_dLongitude; var $m_nAltitude; var $m_bAltitudeValide; var $m_nDirection; var $m_bDirectionValide; var $m_nPrecision; var $m_bPrecisionValide; var $m_nVitesse; var $m_bVitesseValide; var $m_clDateMesure; var $m_bPositionValide; function __construct($Valeur=null) { parent::__construct(null); $this->F6ed4bd52(); } function F6ed4bd52() { $this->m_dLatitude=0; $this->m_dLongitude=0; $this->m_bAltitude=0; $this->m_bAltitudeValide=false; $this->m_bDirection=0; $this->m_bDirectionValide=false; $this->m_bPrecision=0; $this->m_bPrecisionValide=false; $this->m_bVitesse=0; $this->m_bVitesseValide=false; $this->m_bPositionValide=false; CreerType($this->m_clDateMesure,null,TYPEWL_DATEHEURE,null); } function& GetLatitude() {return $this->m_dLatitude;} function SetLatitude($dLatitude) {$this->m_dLatitude = $dLatitude; $this->m_bPositionValide=true;} function& GetLongitude() {return $this->m_dLongitude;} function SetLongitude($dLongitude) {$this->m_dLongitude = $dLongitude; $this->m_bPositionValide=true;} function& GetAltitude() {return $this->m_nAltitude;} function SetAltitude($nAltitude) {$this->m_nAltitude = $nAltitude; $this->m_bAltitudeValide=true;} function& GetDirection() {return $this->m_nDirection;} function SetDirection($nDirection) {$this->m_nDirection = $nDirection; $this->m_bDirectionValide=true;} function& GetPrecision() {return $this->m_nPrecision;} function SetPrecision($nPrecision) {$this->m_nPrecision = $nPrecision; $this->m_bPrecisionValide=true;} function& GetVitesse() {return $this->m_nVitesse;} function SetVitesse($nVitesse) {$this->m_nVitesse = $nVitesse; $this->m_bVitesseValide=true;} function& GetDateMesure() {return $this->m_clDateMesure;} function SetDateMesure($clDateMesure) {Operateur(95, $this->m_nDateMesure, $clDateMesure);} } class CDinoAdresse extends CObjetComposante { var $m_sRue; var $m_sVille; var $m_sCodePostal; var $m_sRegion; var $m_sPays; var $m_clPosition; function __construct($Valeur=null) { parent::__construct(null); $this->m_clPosition = new CDinoGeoPosition(); } function& GetRue() {return $this->m_sRue;} function SetRue($sRue) {$this->m_sRue = $sRue;} function& GetVille() {return $this->m_sVille;} function SetVille($sVille) {$this->m_sVille = $sVille;} function& GetCodePostal() {return $this->m_sCodePostal;} function SetCodePostal($sCodePostal) {$this->m_sCodePostal = $sCodePostal;} function& GetRegion() {return $this->m_sRegion;} function SetRegion($sRegion) {$this->m_sRegion = $sRegion;} function& GetPays() {return $this->m_sPays;} function SetPays($sPays) {$this->m_sPays = $sPays;} function& GetPosition() {return $this->m_clPosition;} function SetPosition($clPosition) {Operateur(95,$this->m_clPosition,$clPosition);} function Fd6461a32() { $rcszAdresseComplete = ''; if (F8b98af41($this->m_sRue)) { $rcszAdresseComplete.=$this->m_sRue; } if (F8b98af41($this->m_sVille)) { if (F8b98af41($rcszAdresseComplete)) $rcszAdresseComplete.=", "; $rcszAdresseComplete.=$this->m_sVille; } if (F8b98af41($this->m_sCodePostal)) { if (F8b98af41($rcszAdresseComplete)) $rcszAdresseComplete.=", "; $rcszAdresseComplete.=$this->m_sCodePostal; } if (F8b98af41($this->m_sRegion)) { if (F8b98af41($rcszAdresseComplete)) $rcszAdresseComplete.=", "; $rcszAdresseComplete.=$this->m_sRegion; } if (F8b98af41($this->m_sPays)) { if (F8b98af41($rcszAdresseComplete)) $rcszAdresseComplete.=", "; $rcszAdresseComplete.=$this->m_sPays; } return $rcszAdresseComplete; } } class CDinoAccesseurMembreJSON extends CTypeComparable { function __construct($pclDino) { parent::__construct(null); $this->m_Valeur =& $pclDino; } function& getProp($prop) { $null = null; if (!isset($this->m_Valeur)) return $null; return $this->m_Valeur->getPropParIndice($prop); } function F9656d042($prop,$valeur) { if (isset($this->m_Valeur)) $this->m_Valeur->setPropParIndice($prop,$valeur); } function& operateurSub( $nIndice ) { $null = null; if (!isset($this->m_Valeur)) return $null; return $this->m_Valeur->getPropParIndice(F075ca95b($nIndice)); } function& Fc91f0eb7( $Valeur, $nIndice ) { $null = null; if (!isset($this->m_Valeur)) return $null; return $this->m_Valeur->setPropParIndice(F075ca95b($nIndice),$Valeur); } } class CDinoJSON extends CObjetComposante { var $m_Nom; var $m_Type; var $m_Existe; var $m_jsonParent; function __construct($Valeur=null) { parent::__construct($Valeur); $this->m_Existe = true; $this->m_Nom = ""; $this->m_Type = 0; $this->m_jsonParent = null; if (isset($this->m_Valeur)) { $this->m_Type = CDinoJSON::s_GetType($this->m_Valeur); } } static public function s_GetType($jsonValeur) { return is_object($jsonValeur) ? wlVariantObjet : (is_array($jsonValeur) ? wlTableau : constant('TYPEVAR_' . F541bbf6d($jsonValeur))); } function F1b8e122c($Valeur) { if (!isset($Valeur)) return null; if (is_array($Valeur)) { return $Valeur; } $sValeur = VersChaine($Valeur); $return = json_decode($sValeur); if(!isset($return)) return $sValeur; if (!UNICODE_PAGE_UTF8) { $return = F2db22222($return, function($s) {return _cp1252_utf8_to_iso($s);}); } return $return; } function Fbd527120($sNom) { if (is_array($this->m_Valeur)) { if (array_key_exists(intval($sNom)-1,$this->m_Valeur)) return intval($sNom)-1; return false; } if (!is_object($this->m_Valeur)) return false; $tabMembres = get_object_vars($this->m_Valeur); $sNomMin = F03771b65(utf8_strtolower($sNom)); foreach (array_keys($tabMembres) as $sNomMembre) { if (strcmp($sNomMin,F03771b65(utf8_strtolower($sNomMembre)))===0) return $sNomMembre; } return false; } function& Fc424b461() { if (!is_object($this->m_Valeur) && !is_array($this->m_Valeur)) { if (!isset($this->m_Valeur)) { $sRetour = 'null'; } else { $sRetour = VersChaine($this->m_Valeur); } } else { $sRetour = $this->GetFormatJSON(); } return $sRetour; } function& operateurSub( $clMembre ) { return CTypeComparable::operateurSub($clMembre); } function& Fc91f0eb7( $Valeur, $clMembre ) { return CTypeComparable::Fc91f0eb7($Valeur,$clMembre); } function& Fcc4f5b5d( $pclDino ) { if (is_object($pclDino) && $pclDino->__GetType() != TYPEWL_DINO && !F1bb79b96($pclDino)) { if($pclDino->Ffe33562a()) { $serialiseur = new WDSerialiseur(); $pclDino->F81cf9784($serialiseur); $return = $serialiseur->m_writer; } else { $return = $pclDino->F35be7f7f(); } } else { $return = VersPrimitif($pclDino); } $this->SetValeur($return); $this->m_Type = CDinoJSON::s_GetType($this->m_Valeur); $this->F0a894f00($return); return $this; } function F0a894f00(&$NouvelleValeur,$sNomMembre=null) { $this->m_Existe = true; if (isset($sNomMembre)) { if (!is_object($this->m_Valeur)) { if (is_numeric($sNomMembre) && $sNomMembre == intval($sNomMembre)) $this->m_Valeur = array(); else $this->m_Valeur = new stdClass(); } if (is_array($this->m_Valeur)) $this->m_Valeur[intval($sNomMembre)-1] =& $NouvelleValeur; else{ $this->m_Valeur->$sNomMembre =& $NouvelleValeur; } $this->m_Type = wlVariantObjet; } if (isset($this->m_jsonParent)) { $this->m_jsonParent->F0a894f00($this->m_Valeur,$this->m_Nom); } } function& F6c5cf331($clNom,$clParam = null) { $sNom = VersChaine($clNom); $sNomRecherche = $this->Fbd527120($sNom); $retour = null; if ($sNomRecherche===false) { CreerType($retour,null,TYPEWL_DINO,array('CDinoJSON','','"0"')); $retour->m_Existe = false; $retour->m_Nom = $sNom; $retour->m_Type = 0; } else { if (is_object($this->m_Valeur)) CreerType($retour,null,TYPEWL_DINO,array('CDinoJSON','',Fc214a7f9( $this->m_Valeur->$sNomRecherche))); elseif (is_array($this->m_Valeur)) CreerType($retour,null,TYPEWL_DINO,array('CDinoJSON','',Fc214a7f9( $this->m_Valeur[$sNomRecherche]))); else { Fa79fbf41("cas non géré"); return $retour; } $retour->m_Existe = true; $retour->m_Nom = is_array($this->m_Valeur) ? ($sNomRecherche+1) : $sNomRecherche; $retour->m_Type = CDinoJSON::s_GetType($retour->m_Valeur); } $retour->m_jsonParent =& $this; return $retour; } function& Ff327a0d0($clValeur,$clNom) { $sNom = VersChaine($clNom); $jsonMembre =& $this->F6c5cf331($clNom); $retour =& $jsonMembre->Fcc4f5b5d($clValeur); return $retour; } function& GetMembre() { $tabRetour = array(); if (is_object($this->m_Valeur)) { $tabMembres = get_object_vars($this->m_Valeur); foreach (array_keys($tabMembres) as $sNomMembre) { $tabRetour[] = _clone( $this->m_Valeur->$sNomMembre ); } } return CreerType($tabRetour,null,TYPEWL_TABLEAU,$tabRetour); } function SetMembre($tab) { if (is_object($this->m_Valeur) && is_array($tab) && count($tab,COUNT_NORMAL)>0) { $tabMembres = get_object_vars($this->m_Valeur); $i = 0; foreach (array_slice(array_keys($tabMembres),0,count($tab,COUNT_NORMAL)) as $sNomMembre) { $this->m_Valeur->$sNomMembre = GetValeur($tab[$i++]); } } } function& GetNom() { return $this->m_Nom; } function SetNom($p) { $this->m_Nom = $p; } function& F4d78046e() { $return = null; if (is_object($this->m_Valeur)) { $return = $this->GetFormatJSON(); } else if (is_array($this->m_Valeur)) { $return = $this->GetFormatJSON(); } else { $return = $this->GetValeur(); } if (!isset($return)) $return = 'null'; return $return; } function& GetValeur() { $return = null; if (!is_object($this->m_Valeur) && !is_array($this->m_Valeur)) $return = $this->m_Valeur; return $return; } function& GetType() { return $this->m_Type; } function& GetExiste() { return $this->m_Existe; } function& GetOccurrence() { $return = 0; if ($this->m_Type == wlTableau) $return = count($this->m_Valeur,COUNT_NORMAL); return $return; } function& GetFormatJSON() { $return = Fc214a7f9($this->m_Valeur); return $return; } function SetFormatJSON($p) { $this->SetValeur($p); } } function Fc214a7f9($obj, $bPrettyPrint=null, $bDejaUTF8=false, $bVersUTF8=true, $nProfondeur=1) { if (!isset($obj)) return 'null'; $charSeparateur = $bPrettyPrint!==false ? ', ' : ','; $charFinDeLigne = $bPrettyPrint===true ? RC: ''; $charIndentationOn = $bPrettyPrint!==true ? '' : str_repeat(TAB,$nProfondeur); $charIndentationOff= $bPrettyPrint!==true ? '' : str_repeat(TAB,$nProfondeur-1); $charObjetDebut = $bPrettyPrint===false ? '{' : ($bPrettyPrint===true ? ($nProfondeur===1 ? '' : $charFinDeLigne).$charIndentationOff.'{'.$charFinDeLigne.$charIndentationOn : '{ '); $charObjetFin = $bPrettyPrint===false ? '}' : ($bPrettyPrint==true ? $charFinDeLigne.$charIndentationOff.'}' : ' }'); $charObjetNom = ':'; $charArrayDebut = $bPrettyPrint===false ? '[' : ($bPrettyPrint===true ? ($nProfondeur===1 ? '' : $charFinDeLigne).$charIndentationOff.'['.$charFinDeLigne.$charIndentationOn : '[ '); $charArrayFin = $bPrettyPrint===false ? ']' : ($bPrettyPrint===true ? $charFinDeLigne.$charIndentationOff.']' : ' ]'); $fConversion = $bDejaUTF8 ? function($s) { return $s; } : function($s) { return Fee7ba3f9($s); }; $fPostConversion = $bVersUTF8 ? function($s) { return $s; } : function($s) { return F5b94f193($s); }; if (is_object($obj)) { return $charObjetDebut .array_reduce( array_keys(get_object_vars($obj)), function($avant, $apres) use ($obj,$charObjetNom,$charSeparateur,$charFinDeLigne,$charIndentationOn,$bPrettyPrint,$fConversion,$bDejaUTF8,$fPostConversion,$bVersUTF8,$nProfondeur) { return F5b2f2e5c($charSeparateur . $charFinDeLigne.$charIndentationOn, "".$avant , $fPostConversion(json_encode($fConversion($apres))) . $charObjetNom . Fc214a7f9($obj->$apres,$bPrettyPrint,$bDejaUTF8,$bVersUTF8,$nProfondeur+1)); }) . $charObjetFin; } elseif (is_array($obj)) { return $charArrayDebut .array_reduce( $obj, function($avant, $apres) use ($charSeparateur,$charFinDeLigne,$charIndentationOn,$bPrettyPrint,$bDejaUTF8,$bVersUTF8,$nProfondeur) { return F5b2f2e5c( $charSeparateur. $charFinDeLigne.$charIndentationOn , "".$avant , Fc214a7f9($apres,$bPrettyPrint,$bDejaUTF8,$bVersUTF8,$nProfondeur+1)); }) . $charArrayFin; } else { return $fPostConversion(json_encode($fConversion($obj))); } } function Fb2f6fc62($nTypeOperateur) { return ($nTypeOperateur & 1); } function F2080fcae($szNomPropriete, $nAccesseurType) { $szNomPropriete = utf8_ucfirst ( $szNomPropriete ); if ($szNomPropriete==='LibelleHTML') $szNomPropriete = 'LibelleRiche'; elseif ($szNomPropriete==='ClasseHTML') $szNomPropriete = 'ClasseSupp'; switch ($nAccesseurType) { case SETTER_PROPRIETE : return 'Set'.$szNomPropriete; case GETTER_PROPRIETE_HTML: $szNomPropriete .= 'HTML'; case GETTER_PROPRIETE: return 'Get'.$szNomPropriete; default: Erreur('ErreurGenerique',Fc34ec142("PROPRIETE_INDISPONIBLE")); } return null; } function& F5b2f2e5c( $Separateur, $Operande1=null, $Operande2=null ) { $Operande1 = (isset($Operande1)) ? VersChaine($Operande1) : null; $Operande2 = (isset($Operande2)) ? VersChaine($Operande2) : null; Fd98fd367($Operande1,$Separateur,$Operande2,isset($Operande1)); return $Operande1; } 
function utf8_substr_compare($s1,$s2,$nOffset1,$nTaille=null,$bSensibleCasse=true) { if (!isset($nTaille)) $nTaille = max(utf8_strlen($s1),utf8_strlen($s2)); $s1 = utf8_substr($s1,$nOffset1,$nTaille); $s2 = utf8_substr($s2,0,$nTaille); if (!$bSensibleCasse) { $s1 = Fcb2d4de8($s1,ccMajuscule); $s2 = Fcb2d4de8($s2,ccMajuscule); } return strcmp($s1,$s2); } function Fd98fd367(&$sChaine,$pclSeparateur,$pclAjout,$bAvecDebut) { $nLongueurSeparateur = utf8_strlen($pclSeparateur); $nLongueur = utf8_strlen($sChaine); if ( ( $nLongueur==0 && $bAvecDebut ) || ( $nLongueur>=$nLongueurSeparateur && utf8_substr_compare($sChaine,$pclSeparateur,($nLongueur-$nLongueurSeparateur),$nLongueurSeparateur)==0 ) ) { $pclSeparateur = null; } else { if(isset($pclAjout)) { $nLongueurAjout = utf8_strlen($pclAjout); if ( ( $nLongueurAjout == 0 ) || ( $nLongueurAjout>=$nLongueurSeparateur && utf8_substr_compare($pclAjout,$pclSeparateur,0,$nLongueurSeparateur)==0 ) ) { $pclSeparateur = null; } } } if(isset($pclSeparateur)) { $sChaine .= $pclSeparateur; } if(isset($pclAjout)) { $sChaine .= $pclAjout; } } function F791b7c6d($thisValeur , $paramValeur=null) { if (!isset($paramValeur)) { return $thisValeur; } if (is_string($thisValeur) || is_string($paramValeur)) return Page_ANY2STR($thisValeur) . Page_ANY2STR($paramValeur); else return $thisValeur+$paramValeur; } function F66d4f961($vLValue, $param=null) { if (!isset($param)) { return -$vLValue; } else { return $vLValue-$param; } } function F856992a1($nThis,$nParam) { if ( (!is_scalar($nThis)) ||(!is_scalar($nParam))) return null; return floatval( floatval($nThis) * floatval($nParam) ); } function Faac9bb4c($nThis,$nParam) { if ( (!is_scalar($nThis)) ||(!is_scalar($nParam))) return null; $nParam = floatval($nParam); if ($nParam==0) { Fe81a7f9e('ERR_DIVISION_PAR_ZERO'); } return floatval( floatval($nThis) / $nParam ); } function Fc8bab616($nThis,$nParam) { if ( (!is_scalar($nThis)) ||(!is_scalar($nParam))) return null; return $nThis>PHP_INT_MAX ? ($nThis - floor($nThis/$nParam)*intval($nParam)) : (intval($nThis) % intval($nParam)); } function Fa4014e81($vThis, $vCompare ) { if ( (is_numeric($vThis)&&is_numeric($vCompare)) && (!is_string($vThis)&&!is_string($vCompare)) ) { $Differrence = $vThis - $vCompare; if ( abs($Differrence) < VALEUR_EPSILON) return 0; if ($Differrence > VALEUR_EPSILON ) return 1; return -1; } else { $vThis = Page_ANY2STR($vThis); $vCompare = Page_ANY2STR($vCompare); return strcmp($vThis,$vCompare); } } function F8e8c5b63( $vThis, $vCompare ) { return ( Fda9fdf77( utf8_strtoupper( utf8_trim( $vThis )),utf8_strtoupper( utf8_trim( $vCompare )),ccSansAccent)== 0 ); } function F8a5c4a8f( $vThis, $vCompare ) { return ( Fda9fdf77( utf8_strtoupper( utf8_trim( $vThis )),utf8_strtoupper( utf8_trim( $vCompare )),ccSansPonctuationNiEspace + ccSansAccent)== 0 ); } function F6bbd4334($vThis) { if (F4fe66dd2($vThis)) return F6bbd4334(GetValeur($vThis)); return (is_object($vThis)) ? ($vThis->F6bbd4334()) : (is_null($vThis)); } function Fd2078f0c( $vThis,$nLimite ) { return F23692b30($vThis,1, $nLimite); } function Fbe774e59( $vThis,$nLimite ) { return F23692b30($vThis,$nLimite); } function F23692b30($sChaine, $nDebut , $nFin = null ) { $sRetour = ''; if ( (isset($nFin)) && ($nFin<$nDebut) ) { return $sRetour; } if ( $nDebut < 1 ) { return $sRetour; } $nTaille = utf8_strlen($sChaine); if ($nDebut > $nTaille) { return $sRetour; } if ($nDebut < 1) $nDebut = 1; if (($nFin > $nTaille)||(!isset($nFin))) $nFin = $nTaille; return utf8_substr($sChaine, $nDebut-1, ($nFin)-($nDebut-1)); } function Fe4bf894d( $vThis, $nIndice ) { return F23692b30($vThis,$nIndice, $nIndice); } function F73c8c735( $vThis ) { return !$vThis; } function Fc4e4d30e( $vThis, $Operande ) { if ( ($vThis > PHP_INT_MAX) || ($Operande > PHP_INT_MAX) ) { F67cfd262(); Fdd46bacf(FMK_ChaineConstruit('ERR_OPERATION_BINAIRE_DEPASSANT_ENTIER_MAX',PHP_INT_MAX,Fc34ec142('OPERATEURWL_NOM_22834'),$vThis,$Operande)); } return intval($Operande) & intval($vThis); } function F6d1ea138( $vThis, $Operande ) { if ( ($vThis > PHP_INT_MAX) || ($Operande > PHP_INT_MAX) ) { F67cfd262(); Fdd46bacf(FMK_ChaineConstruit('ERR_OPERATION_BINAIRE_DEPASSANT_ENTIER_MAX',PHP_INT_MAX,Fc34ec142('OPERATEURWL_NOM_22836'),max($vThis,$Operande))); } return intval($Operande) | intval($vThis); } function F8145229a( $vThis, $Operande ) { if ( ($vThis > PHP_INT_MAX) || ($Operande > PHP_INT_MAX) ) { F67cfd262(); Fdd46bacf(FMK_ChaineConstruit('ERR_OPERATION_BINAIRE_DEPASSANT_ENTIER_MAX',PHP_INT_MAX,Fc34ec142('OPERATEURWL_NOM_22838'),max($vThis,$Operande))); } return (intval($Operande) ^ intval($vThis)); } function F6ad9f563( $vThis ) { if ( ($vThis > PHP_INT_MAX) ) { F67cfd262(); Fdd46bacf(FMK_ChaineConstruit('ERR_OPERATION_BINAIRE_DEPASSANT_ENTIER_MAX',PHP_INT_MAX,Fc34ec142('OPERATEURWL_NOM_22594'),$vThis)); } return ~intval($vThis); } function F2191518a( $vThis, $Operande ) { return pow($vThis , $Operande ); } function Fe680d22d( $vThis, $Operande, $nSize=PHP_INT_SIZE ) { if ($vThis==0 || ($Operande >= $nSize*8)) return 0; if ($Operande+utf8_strpos(decbin($vThis),'1') >= (PHP_INT_SIZE*8-1)) return Fe680d22d( $vThis, $Operande-1, $nSize ) * 2; return $vThis << $Operande; } function F2a7f51d3($vThis, $Operande, $nSize=PHP_INT_SIZE) { if ($Operande >= $nSize*8) return 0; return bindec(decbin(( $vThis >> $Operande ))); } function F83651b3d( $vThis, $Operande ) { return ($Operande && $vThis); } function Fbc1ef051( $vThis, $Operande ) { return ($Operande || $vThis); } function F4cd9f399(&$pclObjet,$sClasse) { $sSerialisation = serialize($pclObjet); $nTailleClasseSource = (int)utf8_substr($sSerialisation,2, utf8_strpos($sSerialisation,':',2)-2); $sNouvelleClasse = utf8_strlen($sClasse) . ':"' . $sClasse . '"'; $sSerialisation = utf8_substr_replace($sSerialisation,$sNouvelleClasse,2,$nTailleClasseSource + utf8_strlen(':"' . (string)$nTailleClasseSource . '"') ); $pclObjet = unserialize($sSerialisation); foreach(array_diff(array_keys(get_object_vars($pclObjet)) ,array_keys(get_class_vars(get_class($pclObjet)))) as $sMembre) unset($pclObjet->$sMembre); return (utf8_strcasecmp(get_class($pclObjet),$sClasse) === 0); } function F13f7f45b(&$pclObjet, $pclObjetParent) { if ( (utf8_strcasecmp($sClasse=get_class($pclObjet),$sClasseParent=get_class($pclObjetParent))!==0) && (!is_subclass_of($pclObjet,$sClasseParent))) { return; } foreach(array_intersect(array_keys(get_class_vars($sClasse)) ,array_keys(get_class_vars($sClasseParent))) as $sMembre) { $pclObjet->$sMembre = _clone($pclObjetParent->$sMembre); } } function& F4ba412d0(&$pclFrom,$sClasse) { $clCast= _clone($pclFrom); F4cd9f399($clCast,$sClasse); return $clCast; } ?>